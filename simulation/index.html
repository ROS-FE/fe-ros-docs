
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="FE ROS workshop documentation page.">
      
      
        <meta name="author" content="Timotej Gašpar">
      
      
        <link rel="canonical" href="https://ros-fe.github.io/fe-ros-docs/simulation/">
      
      
        <link rel="prev" href="../tf_moveit/assignment/">
      
      
        <link rel="next" href="../practical/">
      
      
      <link rel="icon" href="../assets/logo.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>Visualization & Simulation - FE ROS</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ros-and-simulation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="FE ROS" class="md-header__button md-logo" aria-label="FE ROS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            FE ROS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Visualization & Simulation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ROS-FE/fe-ros-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ROS-FE/fe-ros-docs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="FE ROS" class="md-nav__button md-logo" aria-label="FE ROS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    FE ROS
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ROS-FE/fe-ros-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ROS-FE/fe-ros-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction to ROS
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Spatial transformations and trajectory planning
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Spatial transformations and trajectory planning
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tf_moveit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tf_moveit/tf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transformations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tf_moveit/urdf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Describing frame relations with URDF
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tf_moveit/moveit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Planning trajectories with MoveIt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tf_moveit/assignment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Assignment
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Visualization & Simulation
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Visualization & Simulation
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#gazebo" class="md-nav__link">
    <span class="md-ellipsis">
      Gazebo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gazebo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gazebo-gui" class="md-nav__link">
    <span class="md-ellipsis">
      Gazebo GUI
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#urdf" class="md-nav__link">
    <span class="md-ellipsis">
      URDF
    </span>
  </a>
  
    <nav class="md-nav" aria-label="URDF">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-components-of-urdf" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Components of URDF
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Components of URDF">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#links" class="md-nav__link">
    <span class="md-ellipsis">
      Links
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#joints" class="md-nav__link">
    <span class="md-ellipsis">
      Joints
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#urdf-and-robot-simulation-in-gazebo" class="md-nav__link">
    <span class="md-ellipsis">
      URDF and Robot Simulation in Gazebo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="URDF and Robot Simulation in Gazebo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-gazebo-uses-urdf-files" class="md-nav__link">
    <span class="md-ellipsis">
      How Gazebo Uses URDF Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simulating-physical-interactions" class="md-nav__link">
    <span class="md-ellipsis">
      Simulating Physical Interactions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-sensors-and-actuators-to-urdf-for-gazebo-simulation" class="md-nav__link">
    <span class="md-ellipsis">
      Adding Sensors and Actuators to URDF for Gazebo Simulation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linking-urdf-to-gazebo-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      Linking URDF to Gazebo Plugins
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrating-urdf-with-ros-control-and-moveit" class="md-nav__link">
    <span class="md-ellipsis">
      Integrating URDF with ROS Control and MoveIt!
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Integrating URDF with ROS Control and MoveIt!">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-urdf-with-ros-control" class="md-nav__link">
    <span class="md-ellipsis">
      Using URDF with ROS Control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-controllers-using-urdf-and-ros-control" class="md-nav__link">
    <span class="md-ellipsis">
      Setting Up Controllers Using URDF and ROS Control
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-dof-robot-visualization" class="md-nav__link">
    <span class="md-ellipsis">
      2 DOF robot visualization
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 DOF robot visualization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#visualization-of-franka-panda-robot" class="md-nav__link">
    <span class="md-ellipsis">
      Visualization of Franka Panda robot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing-2-dof-robot-in-gazebo" class="md-nav__link">
    <span class="md-ellipsis">
      Importing 2 DOF robot in gazebo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Importing 2 DOF robot in gazebo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gazebo-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Gazebo plugin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transmission" class="md-nav__link">
    <span class="md-ellipsis">
      Transmission
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controlling-the-2dof-robot" class="md-nav__link">
    <span class="md-ellipsis">
      Controlling the 2DOF robot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controlling-the-2dof-robot-using-moveit" class="md-nav__link">
    <span class="md-ellipsis">
      Controlling the 2DOF robot using MoveIt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sensors" class="md-nav__link">
    <span class="md-ellipsis">
      Sensors
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sensors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#camera-sensor" class="md-nav__link">
    <span class="md-ellipsis">
      Camera sensor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#laser-sensor" class="md-nav__link">
    <span class="md-ellipsis">
      Laser sensor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#warehouse-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Warehouse environment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-snapshots" class="md-nav__link">
    <span class="md-ellipsis">
      Code snapshots
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Code snapshots">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#snapshot-1" class="md-nav__link">
    <span class="md-ellipsis">
      Snapshot 1
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Snapshot 1">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-robot2dofurdf" class="md-nav__link">
    <span class="md-ellipsis">
      File robot2dof.urdf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-zagon_gazebolaunch" class="md-nav__link">
    <span class="md-ellipsis">
      File zagon_gazebo.launch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-controlleryaml" class="md-nav__link">
    <span class="md-ellipsis">
      File controller.yaml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#snapshot-2" class="md-nav__link">
    <span class="md-ellipsis">
      Snapshot 2
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Snapshot 2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-ros_controllersyaml" class="md-nav__link">
    <span class="md-ellipsis">
      File ros_controllers.yaml
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-ros_controllerslaunch" class="md-nav__link">
    <span class="md-ellipsis">
      File ros_controllers.launch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-demo_gazebolaunch" class="md-nav__link">
    <span class="md-ellipsis">
      File demo_gazebo.launch
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-pitfalls-and-tips-for-creating-urdf-files" class="md-nav__link">
    <span class="md-ellipsis">
      Common Pitfalls and Tips for Creating URDF Files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Pitfalls and Tips for Creating URDF Files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#incorrect-syntax-and-formatting-errors" class="md-nav__link">
    <span class="md-ellipsis">
      Incorrect Syntax and Formatting Errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#incorrect-inertia-and-mass-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Incorrect Inertia and Mass Properties
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#incorrect-joint-definitions-and-limits" class="md-nav__link">
    <span class="md-ellipsis">
      Incorrect Joint Definitions and Limits
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#misaligned-visual-and-collision-elements" class="md-nav__link">
    <span class="md-ellipsis">
      Misaligned Visual and Collision Elements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overly-complex-urdf-files" class="md-nav__link">
    <span class="md-ellipsis">
      Overly Complex URDF Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#not-accounting-for-ros-and-gazebo-integration-differences" class="md-nav__link">
    <span class="md-ellipsis">
      Not Accounting for ROS and Gazebo Integration Differences
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../practical/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practical work with robots
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../sponsors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sponsors
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../additional/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Additional knowledge
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="ros-and-simulation">ROS and simulation</h1>
<h2 id="gazebo">Gazebo</h2>
<p><a href="https://classic.gazebosim.org/">Gazebo documentation</a></p>
<p><a href="https://classic.gazebosim.org/tutorials?cat=guided_b&amp;tut=guided_b1">Gazebo tutorials</a></p>
<p>From Gazebo documentation:</p>
<ul>
<li>Gazebo is a 3D dynamic simulator for simulating robots, environments and sensors.</li>
<li>Gazebo offers physics simulation, typicaly much better than simulators in game engines. It supports various physical engines: ODE, Bullet, Simbody, DART.</li>
<li>Gazebo is typical used for testing robotics algorithms in realistic scenarios.</li>
<li>Gazebo has repository of 3D models: <a href="http://models.gazebosim.org/">http://models.gazebosim.org/</a>.</li>
<li>Gazebo has good support:</li>
<li>documentation,</li>
<li>tutorials,</li>
<li>use cases and examples.</li>
</ul>
<p>A few key features of Gazebo include:</p>
<ul>
<li>multiple physics engines,</li>
<li>a rich library of robot models and environments,</li>
<li>a wide variety of sensors,</li>
<li>convenient programmatic and graphical interfaces.</li>
</ul>
<p>Why use Gazebo? Simulation of robots is fundamental part of developement and testing of applications and algorithms.</p>
<p>Gazebo can be run in terminal with command</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>gazebo
</code></pre></div>
<p>See tutorial <a href="http://gazebosim.org/tutorials?tut=quick_start">http://gazebosim.org/tutorials?tut=quick_start</a></p>
<h3 id="gazebo-gui">Gazebo GUI</h3>
<p><a href="https://classic.gazebosim.org/tutorials?cat=guided_b&amp;tut=guided_b2">https://classic.gazebosim.org/tutorials?cat=guided_b&amp;tut=guided_b2</a></p>
<h2 id="urdf">URDF</h2>
<p><strong>URDF</strong>, or Unified Robot Description Format, is an XML format used in ROS to describe a robot's physical structure. It includes definitions for robot links and joints, detailing aspects like dimensions, shapes, materials, and the physical constraints between parts. Understanding URDF is crucial because it allows for accurate simulation, visualization, and control of robots in environments like Gazebo and tools like MoveIt!.</p>
<h3 id="basic-components-of-urdf">Basic Components of URDF</h3>
<h4 id="links">Links</h4>
<p>Links represent the rigid parts of a robot, such as arms, wheels, or a base. Each link has several attributes that describe its physical properties:</p>
<ul>
<li><em>Name</em>: A unique identifier for each link.</li>
<li><em>Inertial Properties</em>: Defines the mass, inertia, and center of mass for accurate physics simulation. This is crucial for ensuring the robot behaves realistically under forces like gravity.</li>
<li><em>Visual Properties</em>: Specifies how the link appears in the simulation. This includes the shape (e.g., box, cylinder, mesh), dimensions, color, and material.</li>
<li><em>Collision Properties</em>: Describes the shape and size used for collision detection in the simulation. It's common to use simplified shapes to reduce computational complexity.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_link&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">  </span><span class="nt">&lt;inertial&gt;</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="nt">&lt;mass</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span><span class="nt">&lt;inertia</span><span class="w"> </span><span class="na">ixx=</span><span class="s">&quot;0.1&quot;</span><span class="w"> </span><span class="na">ixy=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">ixz=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">iyy=</span><span class="s">&quot;0.1&quot;</span><span class="w"> </span><span class="na">iyz=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">izz=</span><span class="s">&quot;0.1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">  </span><span class="nt">&lt;/inertial&gt;</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">  </span><span class="nt">&lt;visual&gt;</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">    </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">      </span><span class="nt">&lt;box</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;1 1 0.5&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">    </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">    </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;blue&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">      </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 1 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">    </span><span class="nt">&lt;/material&gt;</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">  </span><span class="nt">&lt;/visual&gt;</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">  </span><span class="nt">&lt;collision&gt;</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">    </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">    </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="w">      </span><span class="nt">&lt;box</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;1 1 0.5&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="w">    </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="w">  </span><span class="nt">&lt;/collision&gt;</span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="nt">&lt;/link&gt;</span>
</code></pre></div>
<p><img src="images/urdflink.png" alt="drawing" width="400"/></p>
<h4 id="joints">Joints</h4>
<p>Joints define the relationships and movements between two links. Each joint specifies the type of movement allowed (rotational, linear, etc.) and the axis along which this movement occurs:</p>
<ul>
<li><em>Name</em>: A unique identifier for each joint.</li>
<li><em>Type</em>: Specifies the joint type (e.g., revolute, prismatic, fixed). The revolute joint allows rotation, while the prismatic joint allows linear movement. Fixed joints do not allow any movement and are used to permanently attach links together.</li>
<li><em>Parent and Child</em>: Defines which links are connected by the joint.</li>
<li><em>Origin</em>: Specifies the position and orientation of the joint relative to the parent link.</li>
<li><em>Axis</em>: For joints that allow movement, this defines the axis along which the motion occurs.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;shoulder_joint&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;revolute&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">  </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">  </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;upper_arm&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">  </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0.5&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">  </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">  </span><span class="nt">&lt;limit</span><span class="w"> </span><span class="na">lower=</span><span class="s">&quot;-1.57&quot;</span><span class="w"> </span><span class="na">upper=</span><span class="s">&quot;1.57&quot;</span><span class="w"> </span><span class="na">effort=</span><span class="s">&quot;5&quot;</span><span class="w"> </span><span class="na">velocity=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="nt">&lt;/joint&gt;</span>
</code></pre></div>
<p><img src="images/urdfjoint.png" alt="drawing" width="400"/></p>
<p>Basic components of a URDF file are links, joints, and their associated visual and collision models. Properly configured links and joints allow for accurate kinematic chains, which are crucial for realistic simulation and precise control. The visual models ensure that the robot is represented correctly in both simulation and visualization tools, while the collision models optimize interactions with the environment by simplifying complex geometries for efficient physics calculations. </p>
<p><img alt="Structure of URDF" src="images/URDF_chart.png" /></p>
<h3 id="urdf-and-robot-simulation-in-gazebo">URDF and Robot Simulation in Gazebo</h3>
<p>URDF provides a standardized way to describe a robot's physical structure, which Gazebo then uses to create an accurate and realistic simulation of the robot and its interactions with the environment. Gazebo relies on the URDF file to construct an accurate simulation of a robot, including its physical appearance, dynamics, sensors, and control systems. By understanding how to define these elements in URDF and link them to Gazebo plugins, you can create robust simulations that mirror real-world scenarios, providing a valuable environment for testing and development in robotics.</p>
<h4 id="how-gazebo-uses-urdf-files">How Gazebo Uses URDF Files</h4>
<p>Gazebo utilizes URDF files to create a virtual representation of a robot in the simulation environment. The URDF file provides all the necessary details about the robot's physical components, including:</p>
<ul>
<li>Geometry and Shape: Defines the robot's physical appearance using basic geometric shapes (like boxes, spheres, and cylinders) or more complex meshes.</li>
<li>Inertia and Mass: Specifies the physical properties of each link, such as mass distribution and inertia. These properties are crucial for realistic physical interactions like movement, collisions, and response to forces.</li>
<li>Joints and Constraints: Describes how different parts of the robot are connected and the types of movement allowed (e.g., rotational or linear). Gazebo uses this information to simulate the robot's kinematics and dynamics accurately.</li>
</ul>
<p>Gazebo reads the URDF file to construct a robot model with all these physical and visual properties, which allows for a realistic simulation environment where the robot can move, interact with other objects, and perform tasks as it would in the real world.</p>
<h4 id="simulating-physical-interactions">Simulating Physical Interactions</h4>
<p>One of the key benefits of using URDF with Gazebo is the ability to simulate realistic physical interactions, which includes:</p>
<ul>
<li><em>Collision Detection</em>: Using the collision properties defined in the URDF, Gazebo can detect when the robot's parts come into contact with other objects or surfaces. This is vital for tasks that require interaction with the environment, such as grasping objects or avoiding obstacles.</li>
<li><em>Dynamics and Physics</em>: Gazebo uses the inertial properties from the URDF file to compute how the robot responds to forces, such as gravity, friction, or collisions. This allows the simulation of complex behaviors, such as balancing, jumping, or handling heavy objects.</li>
<li><em>Sensors Simulation</em>: URDF files can also include sensors (e.g., cameras, LIDAR, IMUs) that are essential for perceiving the environment. Gazebo simulates these sensors, providing realistic data that can be used for testing perception algorithms and sensor fusion.</li>
</ul>
<h4 id="adding-sensors-and-actuators-to-urdf-for-gazebo-simulation">Adding Sensors and Actuators to URDF for Gazebo Simulation</h4>
<p>To create a more complete and functional simulation, you can add sensors and actuators directly into the URDF file. This allows Gazebo to simulate not only the robot’s structure but also its ability to perceive and interact with the environment:</p>
<ul>
<li><strong>Actuators</strong>: Motors and servos can also be described in the URDF using the <transmission> and <joint> tags. These definitions specify how the joints should be controlled, providing the necessary details for integrating with ROS controllers for movement simulation.</li>
<li><strong>Sensors</strong>: Sensors like cameras, LIDAR, and ultrasonic sensors can be defined in the URDF file using <sensor> tags. These elements provide the simulation parameters for Gazebo to generate realistic sensor data, which can be used in algorithms for object detection, mapping, and navigation.</li>
</ul>
<p>Example URDF Snippet for Sensors:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nt">&lt;gazebo&gt;</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">  </span><span class="nt">&lt;sensor</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;camera&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span><span class="nt">&lt;update_rate&gt;</span>30<span class="nt">&lt;/update_rate&gt;</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="nt">&lt;camera&gt;</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">      </span><span class="nt">&lt;horizontal_fov&gt;</span>1.047<span class="nt">&lt;/horizontal_fov&gt;</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">      </span><span class="nt">&lt;image&gt;</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">        </span><span class="nt">&lt;width&gt;</span>640<span class="nt">&lt;/width&gt;</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">        </span><span class="nt">&lt;height&gt;</span>480<span class="nt">&lt;/height&gt;</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">        </span><span class="nt">&lt;format&gt;</span>R8G8B8<span class="nt">&lt;/format&gt;</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">      </span><span class="nt">&lt;/image&gt;</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">      </span><span class="nt">&lt;clip&gt;</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">        </span><span class="nt">&lt;near&gt;</span>0.1<span class="nt">&lt;/near&gt;</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">        </span><span class="nt">&lt;far&gt;</span>100<span class="nt">&lt;/far&gt;</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">      </span><span class="nt">&lt;/clip&gt;</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w">    </span><span class="nt">&lt;/camera&gt;</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="w">  </span><span class="nt">&lt;/sensor&gt;</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="nt">&lt;/gazebo&gt;</span>
</code></pre></div>
<h4 id="linking-urdf-to-gazebo-plugins">Linking URDF to Gazebo Plugins</h4>
<p>Gazebo plugins extend the functionality of the simulation by providing additional capabilities, such as custom sensor models, advanced control strategies, or environmental interactions. These plugins can be linked to a URDF file to enhance the simulation:</p>
<ul>
<li>Adding Plugins in URDF: Plugins are defined within the URDF file using <gazebo> tags. This allows you to customize the robot's behavior in the simulation beyond the basic physical properties described by URDF.</li>
<li>Types of Plugins: Common plugins include those for differential drive (for wheeled robots), grippers (for manipulation tasks), or custom sensor behavior (for specialized sensors not natively supported by Gazebo).</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nt">&lt;gazebo&gt;</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">  </span><span class="nt">&lt;plugin</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;differential_drive_controller&quot;</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;libgazebo_ros_diff_drive.so&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="nt">&lt;ros&gt;</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">      </span><span class="nt">&lt;namespace&gt;</span>/robot<span class="nt">&lt;/namespace&gt;</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">      </span><span class="nt">&lt;remapping&gt;&lt;remap</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;odom&quot;</span><span class="w"> </span><span class="na">to=</span><span class="s">&quot;/odom&quot;</span><span class="w"> </span><span class="nt">/&gt;&lt;/remapping&gt;</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">    </span><span class="nt">&lt;/ros&gt;</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">    </span><span class="nt">&lt;left_joint&gt;</span>left_wheel_joint<span class="nt">&lt;/left_joint&gt;</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">    </span><span class="nt">&lt;right_joint&gt;</span>right_wheel_joint<span class="nt">&lt;/right_joint&gt;</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">    </span><span class="nt">&lt;updateRate&gt;</span>50<span class="nt">&lt;/updateRate&gt;</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">  </span><span class="nt">&lt;/plugin&gt;</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="nt">&lt;/gazebo&gt;</span>
</code></pre></div>
<h3 id="integrating-urdf-with-ros-control-and-moveit">Integrating URDF with ROS Control and MoveIt!</h3>
<h4 id="using-urdf-with-ros-control">Using URDF with ROS Control</h4>
<p>URDF files are fundamental to ROS Control as they provide detailed descriptions of the robot's kinematic structure and dynamics, which are crucial for setting up controllers. Here’s how URDF integrates with ROS Control:</p>
<ul>
<li>Joint and Link Definitions: URDF specifies all the joints and links in a robot, including their kinematic relationships and dynamics. ROS Control uses this information to understand how the joints move and interact.</li>
<li>Transmission Elements: URDF includes <transmission> tags that define how joint states (e.g., position, velocity) are converted into actuator commands and vice versa. These transmissions are critical for interfacing the robot hardware or simulation with ROS controllers.</li>
<li>Controller Configuration: Using the URDF definitions, ROS Control allows configuring different types of controllers (e.g., position, velocity, effort) for the robot joints. The controller configuration is typically defined in YAML files that reference joint names from the URDF.</li>
</ul>
<p>Example URDF Snippet for Transmission:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nt">&lt;transmission</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;shoulder_trans&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">  </span><span class="nt">&lt;type&gt;</span>transmission_interface/SimpleTransmission<span class="nt">&lt;/type&gt;</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">  </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;shoulder_joint&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">    </span><span class="nt">&lt;hardwareInterface&gt;</span>hardware_interface/EffortJointInterface<span class="nt">&lt;/hardwareInterface&gt;</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">  </span><span class="nt">&lt;/joint&gt;</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">  </span><span class="nt">&lt;actuator</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;shoulder_motor&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="nt">&lt;mechanicalReduction&gt;</span>50<span class="nt">&lt;/mechanicalReduction&gt;</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">  </span><span class="nt">&lt;/actuator&gt;</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="nt">&lt;/transmission&gt;</span>
</code></pre></div>
<h4 id="setting-up-controllers-using-urdf-and-ros-control">Setting Up Controllers Using URDF and ROS Control</h4>
<p>Once the URDF file is defined with joints and transmissions, ROS Control requires additional configuration to set up controllers:</p>
<ul>
<li>Controller Manager: ROS Control uses a controller manager to load, unload, start, and stop controllers dynamically. The manager reads the URDF to understand the robot's structure and uses this information to allocate controllers.</li>
<li>Loading Controllers: Controllers are loaded using configuration files (typically in YAML format) that reference the URDF-defined joints and specify the type of control (e.g., position, velocity, effort). These configurations map directly to the joints defined in the URDF file.</li>
</ul>
<p>Example YAML Configuration for ROS Control:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nt">controller_manager</span><span class="p">:</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">  </span><span class="nt">ros__parameters</span><span class="p">:</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="nt">update_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="nt">my_position_controller</span><span class="p">:</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">joint_trajectory_controller/JointTrajectoryController</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">  </span><span class="nt">joints</span><span class="p">:</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">shoulder_joint</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">elbow_joint</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">  </span><span class="nt">constraints</span><span class="p">:</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">    </span><span class="nt">goal_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="w">  </span><span class="nt">state_publish_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">  </span><span class="nt">action_monitor_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="w">  </span><span class="nt">stop_trajectory_duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
</code></pre></div>
<h2 id="2-dof-robot-visualization">2 DOF robot visualization</h2>
<p>Lets first create a new catkin workspace.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>mkdir<span class="w"> </span>catkin_ws
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="nb">cd</span><span class="w"> </span>catkin_ws
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>mkdir<span class="w"> </span>src
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>catkin_make
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="nb">source</span><span class="w"> </span>devel/setup.bash
</code></pre></div>
<p>Lets create new package for simple 2 DOF robot.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nb">cd</span><span class="w"> </span>src
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>catkin_create_pkg<span class="w"> </span>robot_2dof<span class="w"> </span>roscpp<span class="w"> </span>rospy<span class="w"> </span>std_msgs
</code></pre></div>
<p>We will create 2 folders:</p>
<ul>
<li>folder <code>urdf</code> for storing urdf files and</li>
<li>folder <code>launch</code> for launch files.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nb">cd</span><span class="w"> </span>robot_2dof
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>mkdir<span class="w"> </span>urdf
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>mkdir<span class="w"> </span>launch
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="nb">cd</span><span class="w"> </span>../..
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>catkin_make
</code></pre></div>
<p>Check if required packages are installed with command</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>rospack<span class="w"> </span>list-names
</code></pre></div>
<p>We will require packages</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>urdf_tutorial
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>robot_state_publisher
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>joint_state_controller
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>joint_state_publisher_gui
</code></pre></div>
<p>We will create urdf file for 2 DOF robot. Move into catkin workspace folder and then into <code>urdf</code> folder.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="nb">cd</span><span class="w"> </span>src/robot_2dof/urdf/
</code></pre></div>
<p>Create urdf file and open it in editor.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>touch<span class="w"> </span>robot2dof.urdf
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>code<span class="w"> </span>robot2dof.urdf
</code></pre></div>
<p>Copy the code into urdf file.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="cp">&lt;?xml version=&quot;1&quot;?&gt;</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;2dof_robot&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">    </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;White&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">        </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;1.0 1.0 1.0 1.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="w">    </span><span class="nt">&lt;/material&gt;</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="w">    </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Blue&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="w">        </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0.0 0.0 1.0 1.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="w">    </span><span class="nt">&lt;/material&gt;</span><span class="w"> </span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="w">    </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Red&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="w">        </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;1 0 0 1.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="w">    </span><span class="nt">&lt;/material&gt;</span>
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a>
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="w">    </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Black&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="w">        </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 0 1.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a><span class="w">    </span><span class="nt">&lt;/material&gt;</span><span class="w">    </span>
<a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a>
<a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a><span class="w">   </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;world&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a>
<a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a><span class="w">   </span><span class="cm">&lt;!-- BASE LINK--&gt;</span>
<a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_link&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
<a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a><span class="w">                </span><span class="nt">&lt;box</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;0.16 0.16 1.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-27" name="__codelineno-14-27" href="#__codelineno-14-27"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-14-28" name="__codelineno-14-28" href="#__codelineno-14-28"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;White&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-29" name="__codelineno-14-29" href="#__codelineno-14-29"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.5&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-30" name="__codelineno-14-30" href="#__codelineno-14-30"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
<a id="__codelineno-14-31" name="__codelineno-14-31" href="#__codelineno-14-31"></a><span class="w">        </span><span class="nt">&lt;collision&gt;</span>
<a id="__codelineno-14-32" name="__codelineno-14-32" href="#__codelineno-14-32"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-14-33" name="__codelineno-14-33" href="#__codelineno-14-33"></a><span class="w">                </span><span class="nt">&lt;box</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;0.16 0.16 1.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-34" name="__codelineno-14-34" href="#__codelineno-14-34"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-14-35" name="__codelineno-14-35" href="#__codelineno-14-35"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.5&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-36" name="__codelineno-14-36" href="#__codelineno-14-36"></a><span class="w">        </span><span class="nt">&lt;/collision&gt;</span>
<a id="__codelineno-14-37" name="__codelineno-14-37" href="#__codelineno-14-37"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
<a id="__codelineno-14-38" name="__codelineno-14-38" href="#__codelineno-14-38"></a>
<a id="__codelineno-14-39" name="__codelineno-14-39" href="#__codelineno-14-39"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;fixed_base&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-14-40" name="__codelineno-14-40" href="#__codelineno-14-40"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;world&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-41" name="__codelineno-14-41" href="#__codelineno-14-41"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-42" name="__codelineno-14-42" href="#__codelineno-14-42"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
<a id="__codelineno-14-43" name="__codelineno-14-43" href="#__codelineno-14-43"></a>
<a id="__codelineno-14-44" name="__codelineno-14-44" href="#__codelineno-14-44"></a><span class="w">    </span><span class="cm">&lt;!-- PRVI SEGMENT--&gt;</span>
<a id="__codelineno-14-45" name="__codelineno-14-45" href="#__codelineno-14-45"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;prvi_segment&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-14-46" name="__codelineno-14-46" href="#__codelineno-14-46"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
<a id="__codelineno-14-47" name="__codelineno-14-47" href="#__codelineno-14-47"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-14-48" name="__codelineno-14-48" href="#__codelineno-14-48"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.04&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;0.5&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-49" name="__codelineno-14-49" href="#__codelineno-14-49"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-14-50" name="__codelineno-14-50" href="#__codelineno-14-50"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Red&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-51" name="__codelineno-14-51" href="#__codelineno-14-51"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.12 0.0 0.21&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-52" name="__codelineno-14-52" href="#__codelineno-14-52"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
<a id="__codelineno-14-53" name="__codelineno-14-53" href="#__codelineno-14-53"></a><span class="w">        </span><span class="nt">&lt;collision&gt;</span>
<a id="__codelineno-14-54" name="__codelineno-14-54" href="#__codelineno-14-54"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-14-55" name="__codelineno-14-55" href="#__codelineno-14-55"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.04&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;0.5&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-56" name="__codelineno-14-56" href="#__codelineno-14-56"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-14-57" name="__codelineno-14-57" href="#__codelineno-14-57"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.21&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-58" name="__codelineno-14-58" href="#__codelineno-14-58"></a><span class="w">        </span><span class="nt">&lt;/collision&gt;</span>
<a id="__codelineno-14-59" name="__codelineno-14-59" href="#__codelineno-14-59"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
<a id="__codelineno-14-60" name="__codelineno-14-60" href="#__codelineno-14-60"></a>
<a id="__codelineno-14-61" name="__codelineno-14-61" href="#__codelineno-14-61"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;prvi_sklep&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-14-62" name="__codelineno-14-62" href="#__codelineno-14-62"></a><span class="w">        </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;1 0 0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-63" name="__codelineno-14-63" href="#__codelineno-14-63"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-64" name="__codelineno-14-64" href="#__codelineno-14-64"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;prvi_segment&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-65" name="__codelineno-14-65" href="#__codelineno-14-65"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0 0.92&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;-1.5707 0 0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-66" name="__codelineno-14-66" href="#__codelineno-14-66"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
<a id="__codelineno-14-67" name="__codelineno-14-67" href="#__codelineno-14-67"></a>
<a id="__codelineno-14-68" name="__codelineno-14-68" href="#__codelineno-14-68"></a><span class="w">     </span><span class="cm">&lt;!-- DRUGI SEGMENT--&gt;</span>
<a id="__codelineno-14-69" name="__codelineno-14-69" href="#__codelineno-14-69"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;drugi_segment&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-14-70" name="__codelineno-14-70" href="#__codelineno-14-70"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
<a id="__codelineno-14-71" name="__codelineno-14-71" href="#__codelineno-14-71"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-14-72" name="__codelineno-14-72" href="#__codelineno-14-72"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.04&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;0.5&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-73" name="__codelineno-14-73" href="#__codelineno-14-73"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-14-74" name="__codelineno-14-74" href="#__codelineno-14-74"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Blue&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-75" name="__codelineno-14-75" href="#__codelineno-14-75"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;-0.08 0.0 0.21&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-76" name="__codelineno-14-76" href="#__codelineno-14-76"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
<a id="__codelineno-14-77" name="__codelineno-14-77" href="#__codelineno-14-77"></a><span class="w">        </span><span class="nt">&lt;collision&gt;</span>
<a id="__codelineno-14-78" name="__codelineno-14-78" href="#__codelineno-14-78"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-14-79" name="__codelineno-14-79" href="#__codelineno-14-79"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.04&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;0.5&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-80" name="__codelineno-14-80" href="#__codelineno-14-80"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-14-81" name="__codelineno-14-81" href="#__codelineno-14-81"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.21&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-82" name="__codelineno-14-82" href="#__codelineno-14-82"></a><span class="w">        </span><span class="nt">&lt;/collision&gt;</span>
<a id="__codelineno-14-83" name="__codelineno-14-83" href="#__codelineno-14-83"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
<a id="__codelineno-14-84" name="__codelineno-14-84" href="#__codelineno-14-84"></a>
<a id="__codelineno-14-85" name="__codelineno-14-85" href="#__codelineno-14-85"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;drugi_sklep&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-14-86" name="__codelineno-14-86" href="#__codelineno-14-86"></a><span class="w">        </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;1 0 0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-87" name="__codelineno-14-87" href="#__codelineno-14-87"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;prvi_segment&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-88" name="__codelineno-14-88" href="#__codelineno-14-88"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;drugi_segment&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-89" name="__codelineno-14-89" href="#__codelineno-14-89"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.12 0 0.42&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-90" name="__codelineno-14-90" href="#__codelineno-14-90"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
<a id="__codelineno-14-91" name="__codelineno-14-91" href="#__codelineno-14-91"></a>
<a id="__codelineno-14-92" name="__codelineno-14-92" href="#__codelineno-14-92"></a><span class="w">        </span><span class="cm">&lt;!-- TCP SEGMENT--&gt;</span>
<a id="__codelineno-14-93" name="__codelineno-14-93" href="#__codelineno-14-93"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;TCP_segment&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-14-94" name="__codelineno-14-94" href="#__codelineno-14-94"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
<a id="__codelineno-14-95" name="__codelineno-14-95" href="#__codelineno-14-95"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-14-96" name="__codelineno-14-96" href="#__codelineno-14-96"></a><span class="w">                </span><span class="nt">&lt;sphere</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.02&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-97" name="__codelineno-14-97" href="#__codelineno-14-97"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-14-98" name="__codelineno-14-98" href="#__codelineno-14-98"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Red&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-99" name="__codelineno-14-99" href="#__codelineno-14-99"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-100" name="__codelineno-14-100" href="#__codelineno-14-100"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
<a id="__codelineno-14-101" name="__codelineno-14-101" href="#__codelineno-14-101"></a><span class="w">        </span><span class="nt">&lt;collision&gt;</span>
<a id="__codelineno-14-102" name="__codelineno-14-102" href="#__codelineno-14-102"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-14-103" name="__codelineno-14-103" href="#__codelineno-14-103"></a><span class="w">                </span><span class="nt">&lt;sphere</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.02&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-104" name="__codelineno-14-104" href="#__codelineno-14-104"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-14-105" name="__codelineno-14-105" href="#__codelineno-14-105"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-106" name="__codelineno-14-106" href="#__codelineno-14-106"></a><span class="w">        </span><span class="nt">&lt;/collision&gt;</span>
<a id="__codelineno-14-107" name="__codelineno-14-107" href="#__codelineno-14-107"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
<a id="__codelineno-14-108" name="__codelineno-14-108" href="#__codelineno-14-108"></a>
<a id="__codelineno-14-109" name="__codelineno-14-109" href="#__codelineno-14-109"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;TCP_sklep&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-14-110" name="__codelineno-14-110" href="#__codelineno-14-110"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;drugi_segment&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-111" name="__codelineno-14-111" href="#__codelineno-14-111"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;TCP_segment&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-112" name="__codelineno-14-112" href="#__codelineno-14-112"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;-0.08 0 0.46&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-14-113" name="__codelineno-14-113" href="#__codelineno-14-113"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
<a id="__codelineno-14-114" name="__codelineno-14-114" href="#__codelineno-14-114"></a>
<a id="__codelineno-14-115" name="__codelineno-14-115" href="#__codelineno-14-115"></a><span class="nt">&lt;/robot&gt;</span>
</code></pre></div>
<p>We can visualize the model in rviz with command.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>roslaunch<span class="w"> </span>urdf_tutorial<span class="w"> </span>display.launch<span class="w"> </span>model:<span class="o">=</span><span class="s1">&#39;$(find robot_2dof)/urdf/robot2dof.urdf&#39;</span>
</code></pre></div>
<p><img alt="Image shows rviz and gui for 2 DOF robot" src="images/Screenshot%20from%202022-06-22%2015-22-10.png" /></p>
<p>In new terminal window we can list all the ROS topics with command</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>rostopic<span class="w"> </span>list
</code></pre></div>
<p>We receive output</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>/clicked_point
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>/initialpose
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>/joint_states
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>/move_base_simple/goal
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>/rosout
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>/rosout_agg
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>/tf
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>/tf_static
</code></pre></div>
<p>We can print the values of the joints in terminal window with command</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>rostopic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/joint_states
</code></pre></div>
<p>Now if we change the values using slider on the GUI we can follow the values of joints.</p>
<h3 id="visualization-of-franka-panda-robot">Visualization of Franka Panda robot</h3>
<p>We will now visualize more complex model of the robot, such as Franka Panda robot.</p>
<p>Copy file <a href="franka_description.zip">franka_description.zip</a> into folder <code>src</code> and unzip it.</p>
<p>Run command</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="nb">cd</span><span class="w"> </span>src
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>catkin_create_pkg<span class="w"> </span>franka_description
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="nb">cd</span><span class="w"> </span>../..
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>catkin_make
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>roslaunch<span class="w"> </span>urdf_tutorial<span class="w"> </span>display.launch<span class="w"> </span>model:<span class="o">=</span><span class="s1">&#39;$(find franka_description)/urdf/panda.urdf&#39;</span>
</code></pre></div>
<p>In rviz you need to change <em>Fixed Frame</em> (in <em>Global Options</em>) to <em>panda_link0</em>.</p>
<h3 id="importing-2-dof-robot-in-gazebo">Importing 2 DOF robot in gazebo</h3>
<p>First, we will create launch file to load urdf file into gazebo. Go to <code>launch</code> folder:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>touch<span class="w"> </span>zagon_gazebo.launch
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>code<span class="w"> </span>zagon_gazebo.launch
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="nt">&lt;launch&gt;</span>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;robot_description&quot;</span><span class="w"> </span><span class="na">textfile=</span><span class="s">&quot;$(find robot_2dof)/urdf/robot2dof.urdf&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find gazebo_ros)/launch/empty_world.launch&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;gazebo_ros&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;spawn_urdf&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;spawn_model&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;-param robot_description -urdf -model robot2dof&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>
<a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="w">    </span><span class="cm">&lt;!-- --&gt;</span>
<a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a>
<a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="nt">&lt;/launch&gt;</span>
</code></pre></div>
<p>We can run the launch file with command</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>roslaunch<span class="w"> </span>robot_2dof<span class="w"> </span>zagon_gazebo.launch
</code></pre></div>
<p>What we see is only empty gazebo world without the robot. This is because the urdf file does not contain everything we need for simulation in gazebo. First, we need to add <code>&lt;inertial&gt;</code> tag to each link. Gazebo uses physics engine and needs information about ineratial properties of the bodies, including links (<a href="https://wiki.ros.org/urdf/XML/link">documentation</a>) of the robots. If <code>&lt;inertial&gt;</code> property is not added to the link or mass is zero, Gazebo will ignore the link. It is also quite important for stable physical simulation that inertial parameters are quite accurate or at least have reasonable values.</p>
<p>Below is urdf file with added inertial parameters for each link.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="cp">&lt;?xml version=&quot;1&quot;?&gt;</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;2dof_robot&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="w">    </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;White&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="w">        </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;1.0 1.0 1.0 1.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="w">    </span><span class="nt">&lt;/material&gt;</span>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="w">    </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Blue&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="w">        </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0.0 0.0 1.0 1.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="w">    </span><span class="nt">&lt;/material&gt;</span><span class="w"> </span>
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a><span class="w">    </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Red&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a><span class="w">        </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;1 0 0 1.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a><span class="w">    </span><span class="nt">&lt;/material&gt;</span>
<a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a>
<a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a><span class="w">    </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Black&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a><span class="w">        </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 0 1.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a><span class="w">    </span><span class="nt">&lt;/material&gt;</span><span class="w">    </span>
<a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a>
<a id="__codelineno-24-20" name="__codelineno-24-20" href="#__codelineno-24-20"></a><span class="w">   </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;world&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-21" name="__codelineno-24-21" href="#__codelineno-24-21"></a>
<a id="__codelineno-24-22" name="__codelineno-24-22" href="#__codelineno-24-22"></a><span class="w">   </span><span class="cm">&lt;!-- BASE LINK--&gt;</span>
<a id="__codelineno-24-23" name="__codelineno-24-23" href="#__codelineno-24-23"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_link&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-24-24" name="__codelineno-24-24" href="#__codelineno-24-24"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
<a id="__codelineno-24-25" name="__codelineno-24-25" href="#__codelineno-24-25"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-24-26" name="__codelineno-24-26" href="#__codelineno-24-26"></a><span class="w">                </span><span class="nt">&lt;box</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;0.16 0.16 1.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-27" name="__codelineno-24-27" href="#__codelineno-24-27"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-24-28" name="__codelineno-24-28" href="#__codelineno-24-28"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;White&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-29" name="__codelineno-24-29" href="#__codelineno-24-29"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.5&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-30" name="__codelineno-24-30" href="#__codelineno-24-30"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
<a id="__codelineno-24-31" name="__codelineno-24-31" href="#__codelineno-24-31"></a><span class="w">        </span><span class="nt">&lt;collision&gt;</span>
<a id="__codelineno-24-32" name="__codelineno-24-32" href="#__codelineno-24-32"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-24-33" name="__codelineno-24-33" href="#__codelineno-24-33"></a><span class="w">                </span><span class="nt">&lt;box</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;0.16 0.16 1.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-34" name="__codelineno-24-34" href="#__codelineno-24-34"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-24-35" name="__codelineno-24-35" href="#__codelineno-24-35"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.5&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-36" name="__codelineno-24-36" href="#__codelineno-24-36"></a><span class="w">        </span><span class="nt">&lt;/collision&gt;</span>
<a id="__codelineno-24-37" name="__codelineno-24-37" href="#__codelineno-24-37"></a><span class="w">        </span><span class="nt">&lt;inertial&gt;</span>
<a id="__codelineno-24-38" name="__codelineno-24-38" href="#__codelineno-24-38"></a><span class="w">            </span><span class="nt">&lt;mass</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;25&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-39" name="__codelineno-24-39" href="#__codelineno-24-39"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.5&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-40" name="__codelineno-24-40" href="#__codelineno-24-40"></a><span class="w">            </span><span class="nt">&lt;inertia</span><span class="w"> </span><span class="na">ixx=</span><span class="s">&quot;8.741&quot;</span><span class="w"> </span><span class="na">iyy=</span><span class="s">&quot;8.741&quot;</span><span class="w"> </span><span class="na">izz=</span><span class="s">&quot;0.4367&quot;</span><span class="w"> </span><span class="na">ixy=</span><span class="s">&quot;-0.1637&quot;</span><span class="w"> </span><span class="na">ixz=</span><span class="s">&quot;-0.1023&quot;</span><span class="w">  </span><span class="na">iyz=</span><span class="s">&quot;-0.1023&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-41" name="__codelineno-24-41" href="#__codelineno-24-41"></a><span class="w">        </span><span class="nt">&lt;/inertial&gt;</span>
<a id="__codelineno-24-42" name="__codelineno-24-42" href="#__codelineno-24-42"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
<a id="__codelineno-24-43" name="__codelineno-24-43" href="#__codelineno-24-43"></a>
<a id="__codelineno-24-44" name="__codelineno-24-44" href="#__codelineno-24-44"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;fixed_base&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-24-45" name="__codelineno-24-45" href="#__codelineno-24-45"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;world&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-46" name="__codelineno-24-46" href="#__codelineno-24-46"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-47" name="__codelineno-24-47" href="#__codelineno-24-47"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
<a id="__codelineno-24-48" name="__codelineno-24-48" href="#__codelineno-24-48"></a>
<a id="__codelineno-24-49" name="__codelineno-24-49" href="#__codelineno-24-49"></a><span class="w">    </span><span class="cm">&lt;!-- PRVI SEGMENT--&gt;</span>
<a id="__codelineno-24-50" name="__codelineno-24-50" href="#__codelineno-24-50"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;prvi_segment&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-24-51" name="__codelineno-24-51" href="#__codelineno-24-51"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
<a id="__codelineno-24-52" name="__codelineno-24-52" href="#__codelineno-24-52"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-24-53" name="__codelineno-24-53" href="#__codelineno-24-53"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.04&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;0.5&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-54" name="__codelineno-24-54" href="#__codelineno-24-54"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-24-55" name="__codelineno-24-55" href="#__codelineno-24-55"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Red&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-56" name="__codelineno-24-56" href="#__codelineno-24-56"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.12 0.0 0.21&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-57" name="__codelineno-24-57" href="#__codelineno-24-57"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
<a id="__codelineno-24-58" name="__codelineno-24-58" href="#__codelineno-24-58"></a><span class="w">        </span><span class="nt">&lt;collision&gt;</span>
<a id="__codelineno-24-59" name="__codelineno-24-59" href="#__codelineno-24-59"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-24-60" name="__codelineno-24-60" href="#__codelineno-24-60"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.04&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;0.5&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-61" name="__codelineno-24-61" href="#__codelineno-24-61"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-24-62" name="__codelineno-24-62" href="#__codelineno-24-62"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.21&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-63" name="__codelineno-24-63" href="#__codelineno-24-63"></a><span class="w">        </span><span class="nt">&lt;/collision&gt;</span>
<a id="__codelineno-24-64" name="__codelineno-24-64" href="#__codelineno-24-64"></a><span class="w">        </span><span class="nt">&lt;inertial&gt;</span>
<a id="__codelineno-24-65" name="__codelineno-24-65" href="#__codelineno-24-65"></a><span class="w">            </span><span class="nt">&lt;mass</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;2.5&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-66" name="__codelineno-24-66" href="#__codelineno-24-66"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.25&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-67" name="__codelineno-24-67" href="#__codelineno-24-67"></a><span class="w">            </span><span class="nt">&lt;inertia</span><span class="w"> </span><span class="na">ixx=</span><span class="s">&quot;0.2091&quot;</span><span class="w"> </span><span class="na">iyy=</span><span class="s">&quot;0.2091&quot;</span><span class="w"> </span><span class="na">izz=</span><span class="s">&quot;0.002&quot;</span><span class="w"> </span><span class="na">ixy=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">ixz=</span><span class="s">&quot;0.0&quot;</span><span class="w">  </span><span class="na">iyz=</span><span class="s">&quot;0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-68" name="__codelineno-24-68" href="#__codelineno-24-68"></a><span class="w">        </span><span class="nt">&lt;/inertial&gt;</span>
<a id="__codelineno-24-69" name="__codelineno-24-69" href="#__codelineno-24-69"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
<a id="__codelineno-24-70" name="__codelineno-24-70" href="#__codelineno-24-70"></a>
<a id="__codelineno-24-71" name="__codelineno-24-71" href="#__codelineno-24-71"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;prvi_sklep&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-24-72" name="__codelineno-24-72" href="#__codelineno-24-72"></a><span class="w">        </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;1 0 0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-73" name="__codelineno-24-73" href="#__codelineno-24-73"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-74" name="__codelineno-24-74" href="#__codelineno-24-74"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;prvi_segment&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-75" name="__codelineno-24-75" href="#__codelineno-24-75"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0 0.92&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;-1.5707 0 0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-76" name="__codelineno-24-76" href="#__codelineno-24-76"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
<a id="__codelineno-24-77" name="__codelineno-24-77" href="#__codelineno-24-77"></a>
<a id="__codelineno-24-78" name="__codelineno-24-78" href="#__codelineno-24-78"></a><span class="w">     </span><span class="cm">&lt;!-- DRUGI SEGMENT--&gt;</span>
<a id="__codelineno-24-79" name="__codelineno-24-79" href="#__codelineno-24-79"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;drugi_segment&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-24-80" name="__codelineno-24-80" href="#__codelineno-24-80"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
<a id="__codelineno-24-81" name="__codelineno-24-81" href="#__codelineno-24-81"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-24-82" name="__codelineno-24-82" href="#__codelineno-24-82"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.04&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;0.5&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-83" name="__codelineno-24-83" href="#__codelineno-24-83"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-24-84" name="__codelineno-24-84" href="#__codelineno-24-84"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Blue&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-85" name="__codelineno-24-85" href="#__codelineno-24-85"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;-0.08 0.0 0.21&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-86" name="__codelineno-24-86" href="#__codelineno-24-86"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
<a id="__codelineno-24-87" name="__codelineno-24-87" href="#__codelineno-24-87"></a><span class="w">        </span><span class="nt">&lt;collision&gt;</span>
<a id="__codelineno-24-88" name="__codelineno-24-88" href="#__codelineno-24-88"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-24-89" name="__codelineno-24-89" href="#__codelineno-24-89"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.04&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;0.5&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-90" name="__codelineno-24-90" href="#__codelineno-24-90"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-24-91" name="__codelineno-24-91" href="#__codelineno-24-91"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.21&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-92" name="__codelineno-24-92" href="#__codelineno-24-92"></a><span class="w">        </span><span class="nt">&lt;/collision&gt;</span>
<a id="__codelineno-24-93" name="__codelineno-24-93" href="#__codelineno-24-93"></a><span class="w">        </span><span class="nt">&lt;inertial&gt;</span>
<a id="__codelineno-24-94" name="__codelineno-24-94" href="#__codelineno-24-94"></a><span class="w">            </span><span class="nt">&lt;mass</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;2.5&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-95" name="__codelineno-24-95" href="#__codelineno-24-95"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.25&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-96" name="__codelineno-24-96" href="#__codelineno-24-96"></a><span class="w">            </span><span class="nt">&lt;inertia</span><span class="w"> </span><span class="na">ixx=</span><span class="s">&quot;0.2091&quot;</span><span class="w"> </span><span class="na">iyy=</span><span class="s">&quot;0.2091&quot;</span><span class="w"> </span><span class="na">izz=</span><span class="s">&quot;0.002&quot;</span><span class="w"> </span><span class="na">ixy=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">ixz=</span><span class="s">&quot;0.0&quot;</span><span class="w">  </span><span class="na">iyz=</span><span class="s">&quot;0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-97" name="__codelineno-24-97" href="#__codelineno-24-97"></a><span class="w">        </span><span class="nt">&lt;/inertial&gt;</span>
<a id="__codelineno-24-98" name="__codelineno-24-98" href="#__codelineno-24-98"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
<a id="__codelineno-24-99" name="__codelineno-24-99" href="#__codelineno-24-99"></a>
<a id="__codelineno-24-100" name="__codelineno-24-100" href="#__codelineno-24-100"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;drugi_sklep&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-24-101" name="__codelineno-24-101" href="#__codelineno-24-101"></a><span class="w">        </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;1 0 0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-102" name="__codelineno-24-102" href="#__codelineno-24-102"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;prvi_segment&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-103" name="__codelineno-24-103" href="#__codelineno-24-103"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;drugi_segment&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-104" name="__codelineno-24-104" href="#__codelineno-24-104"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.12 0 0.42&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-105" name="__codelineno-24-105" href="#__codelineno-24-105"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
<a id="__codelineno-24-106" name="__codelineno-24-106" href="#__codelineno-24-106"></a>
<a id="__codelineno-24-107" name="__codelineno-24-107" href="#__codelineno-24-107"></a><span class="w">        </span><span class="cm">&lt;!-- TCP SEGMENT--&gt;</span>
<a id="__codelineno-24-108" name="__codelineno-24-108" href="#__codelineno-24-108"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;TCP_segment&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-24-109" name="__codelineno-24-109" href="#__codelineno-24-109"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
<a id="__codelineno-24-110" name="__codelineno-24-110" href="#__codelineno-24-110"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-24-111" name="__codelineno-24-111" href="#__codelineno-24-111"></a><span class="w">                </span><span class="nt">&lt;sphere</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.02&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-112" name="__codelineno-24-112" href="#__codelineno-24-112"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-24-113" name="__codelineno-24-113" href="#__codelineno-24-113"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Red&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-114" name="__codelineno-24-114" href="#__codelineno-24-114"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-115" name="__codelineno-24-115" href="#__codelineno-24-115"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
<a id="__codelineno-24-116" name="__codelineno-24-116" href="#__codelineno-24-116"></a><span class="w">        </span><span class="nt">&lt;collision&gt;</span>
<a id="__codelineno-24-117" name="__codelineno-24-117" href="#__codelineno-24-117"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-24-118" name="__codelineno-24-118" href="#__codelineno-24-118"></a><span class="w">                </span><span class="nt">&lt;sphere</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.02&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-119" name="__codelineno-24-119" href="#__codelineno-24-119"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-24-120" name="__codelineno-24-120" href="#__codelineno-24-120"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-121" name="__codelineno-24-121" href="#__codelineno-24-121"></a><span class="w">        </span><span class="nt">&lt;/collision&gt;</span>
<a id="__codelineno-24-122" name="__codelineno-24-122" href="#__codelineno-24-122"></a><span class="w">        </span><span class="nt">&lt;inertial&gt;</span>
<a id="__codelineno-24-123" name="__codelineno-24-123" href="#__codelineno-24-123"></a><span class="w">            </span><span class="nt">&lt;mass</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.034&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-124" name="__codelineno-24-124" href="#__codelineno-24-124"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-125" name="__codelineno-24-125" href="#__codelineno-24-125"></a><span class="w">            </span><span class="nt">&lt;inertia</span><span class="w"> </span><span class="na">ixx=</span><span class="s">&quot;0.0000054&quot;</span><span class="w"> </span><span class="na">iyy=</span><span class="s">&quot;0.0000054&quot;</span><span class="w"> </span><span class="na">izz=</span><span class="s">&quot;0.0000054&quot;</span><span class="w"> </span><span class="na">ixy=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">ixz=</span><span class="s">&quot;0.0&quot;</span><span class="w">  </span><span class="na">iyz=</span><span class="s">&quot;0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-126" name="__codelineno-24-126" href="#__codelineno-24-126"></a><span class="w">        </span><span class="nt">&lt;/inertial&gt;</span>
<a id="__codelineno-24-127" name="__codelineno-24-127" href="#__codelineno-24-127"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
<a id="__codelineno-24-128" name="__codelineno-24-128" href="#__codelineno-24-128"></a>
<a id="__codelineno-24-129" name="__codelineno-24-129" href="#__codelineno-24-129"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;TCP_sklep&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-24-130" name="__codelineno-24-130" href="#__codelineno-24-130"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;drugi_segment&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-131" name="__codelineno-24-131" href="#__codelineno-24-131"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;TCP_segment&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-132" name="__codelineno-24-132" href="#__codelineno-24-132"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;-0.08 0 0.46&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-24-133" name="__codelineno-24-133" href="#__codelineno-24-133"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
<a id="__codelineno-24-134" name="__codelineno-24-134" href="#__codelineno-24-134"></a>
<a id="__codelineno-24-135" name="__codelineno-24-135" href="#__codelineno-24-135"></a><span class="nt">&lt;/robot&gt;</span>
</code></pre></div>
<p>Simulation starts and the robot acts as 2 DOF pendulum. We can add a <em>pause</em> argument in lauch file, so that the simulation does not run automatically.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="nt">&lt;launch&gt;</span>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;paused&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;robot_description&quot;</span><span class="w"> </span><span class="na">textfile=</span><span class="s">&quot;$(find robot_2dof)/urdf/robot2dof.urdf&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find gazebo_ros)/launch/empty_world.launch&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a><span class="w">        </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;paused&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg paused)&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a><span class="w">    </span><span class="nt">&lt;/include&gt;</span><span class="w">    </span>
<a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a>
<a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;gazebo_ros&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;spawn_urdf&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;spawn_model&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;-param robot_description -urdf -model robot2dof&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a>
<a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a><span class="w">    </span><span class="cm">&lt;!-- --&gt;</span>
<a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a>
<a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a><span class="nt">&lt;/launch&gt;</span>
</code></pre></div>
<p>We see a robot, but it is essentially nonfunctional gazebo interface. It doesn't do anything, and is missing lots of key information that ROS would need to use this robot. Whe we started visualization with <em>urdf_tutorial</em> we had been using <em>joint_state_publisher</em> to specify the pose of each joint. However, the robot itself should provide that information in the real world or in gazebo. Yet without specifying that, Gazebo doesn't know to publish that information. To achieve this and for the robot to be interactive with ROS, we need to specify <em>Plugins</em> and <em>Transmissions</em>.</p>
<h4 id="gazebo-plugin">Gazebo plugin</h4>
<p>Gazebo plugin is needed for proper interaction between ROS and Gazebo. We need to dynamically link to the ROS library by adding <code>&lt;gazebo&gt;</code> tag before the closing <code>&lt;/robot&gt;</code> tag:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="w">    </span><span class="nt">&lt;gazebo&gt;</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="w">        </span><span class="nt">&lt;plugin</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;control&quot;</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;libgazebo_ros_control.so&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">            </span><span class="nt">&lt;robotNamespace&gt;</span>/MOJROBOT<span class="nt">&lt;/robotNamespace&gt;</span>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="w">        </span><span class="nt">&lt;/plugin&gt;</span>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">    </span><span class="nt">&lt;/gazebo&gt;</span><span class="w"> </span>
</code></pre></div>
<h4 id="transmission">Transmission</h4>
<p>For every joint we need to specify a transmission. Transmission declares how the joint will be driven or controlled. There are three types of transmissions (<a href="http://wiki.ros.org/urdf/XML/Transmission">documentation</a>):</p>
<ul>
<li>positional - PositionJointInterface,</li>
<li>velocity - VelocityJointInterface,</li>
<li>joint torque - EffortJointInterface.</li>
</ul>
<p>Before the closing <code>&lt;/robot&gt;</code> tag add the following code:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="w">    </span><span class="cm">&lt;!-- PRENOSI --&gt;</span>
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="w">    </span><span class="nt">&lt;transmission</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;trans1&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="w">        </span><span class="nt">&lt;type&gt;</span>transmission_interface/SimpleTransmission<span class="nt">&lt;/type&gt;</span>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="w">        </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;prvi_sklep&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="w">            </span><span class="nt">&lt;hardwareInterface&gt;</span>hardware_interface/PositionJointInterface<span class="nt">&lt;/hardwareInterface&gt;</span>
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="w">        </span><span class="nt">&lt;/joint&gt;</span>
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="w">        </span><span class="nt">&lt;actuator</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;motor1&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a><span class="w">            </span><span class="nt">&lt;mechanicalReduction&gt;</span>1<span class="nt">&lt;/mechanicalReduction&gt;</span>
<a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a><span class="w">        </span><span class="nt">&lt;/actuator&gt;</span>
<a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a><span class="w">    </span><span class="nt">&lt;/transmission&gt;</span>
<a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a>
<a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a><span class="w">    </span><span class="nt">&lt;transmission</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;trans2&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a><span class="w">        </span><span class="nt">&lt;type&gt;</span>transmission_interface/SimpleTransmission<span class="nt">&lt;/type&gt;</span>
<a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a><span class="w">        </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;drugi_sklep&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a><span class="w">            </span><span class="nt">&lt;hardwareInterface&gt;</span>hardware_interface/PositionJointInterface<span class="nt">&lt;/hardwareInterface&gt;</span>
<a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a><span class="w">        </span><span class="nt">&lt;/joint&gt;</span>
<a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a><span class="w">        </span><span class="nt">&lt;actuator</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;motor2&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a><span class="w">            </span><span class="nt">&lt;mechanicalReduction&gt;</span>1<span class="nt">&lt;/mechanicalReduction&gt;</span>
<a id="__codelineno-27-19" name="__codelineno-27-19" href="#__codelineno-27-19"></a><span class="w">        </span><span class="nt">&lt;/actuator&gt;</span>
<a id="__codelineno-27-20" name="__codelineno-27-20" href="#__codelineno-27-20"></a><span class="w">    </span><span class="nt">&lt;/transmission&gt;</span>
</code></pre></div>
<h3 id="controlling-the-2dof-robot">Controlling the 2DOF robot</h3>
<p>Now that we linked Gazebo and ROS we want to control the robot. We have to setup the controllers.</p>
<p>First we need to add <code>joint_state_publisher</code> gazebo plugin in <code>urdf</code> file:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="w">    </span><span class="nt">&lt;gazebo&gt;</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="w">        </span><span class="nt">&lt;plugin</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;libgazebo_ros_joint_state_publisher.so&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="w">            </span><span class="nt">&lt;jointName&gt;</span>prvi_sklep,<span class="w"> </span>drugi_sklep<span class="nt">&lt;/jointName&gt;</span>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="w">        </span><span class="nt">&lt;/plugin&gt;</span>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="w">    </span><span class="nt">&lt;/gazebo&gt;</span><span class="w"> </span>
</code></pre></div>
<p>We need to create <code>yaml</code> files with specifications for controllers. <code>yaml</code> will be saved in <code>config</code> folder. Lets move into our <code>src</code> folder of our workspace.</p>
<p>We will create 1 folder:</p>
<ul>
<li>folder <code>config</code> for storing  <code>yaml</code> files.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="nb">cd</span><span class="w"> </span>robot_2dof
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>mkdir<span class="w"> </span>config
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="nb">cd</span><span class="w"> </span>config
</code></pre></div>
<p>Create <code>yaml</code>  file and open it in editor.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>touch<span class="w"> </span>controller.yaml
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>code<span class="w"> </span>controller.yaml
</code></pre></div>
<p>Add the following text:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="nt">MOJROBOT</span><span class="p">:</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="w">  </span><span class="c1"># publish all joint states:</span>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="w">  </span><span class="nt">joint_state_controller</span><span class="p">:</span>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">joint_state_controller/JointStateController</span>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="w">    </span><span class="nt">publish_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="nt">MOJROBOT/gazebo_ros_control/pid_gains</span><span class="p">:</span>
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a><span class="w">  </span><span class="nt">prvi_sklep</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">p</span><span class="p">:</span><span class="w"> </span><span class="nv">1000</span><span class="p p-Indicator">,</span><span class="nt"> i</span><span class="p">:</span><span class="w"> </span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="nt">  d</span><span class="p">:</span><span class="w"> </span><span class="nv">100</span><span class="p p-Indicator">}</span>
<a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a><span class="w">  </span><span class="nt">drugi_sklep</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">p</span><span class="p">:</span><span class="w"> </span><span class="nv">1000</span><span class="p p-Indicator">,</span><span class="nt"> i</span><span class="p">:</span><span class="w"> </span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="nt">  d</span><span class="p">:</span><span class="w"> </span><span class="nv">100</span><span class="p p-Indicator">}</span>
</code></pre></div>
<p>In <code>launch</code> file we need to add the following lines:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="w">    </span><span class="nt">&lt;rosparam</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find robot_2dof)/config/controller.yaml&quot;</span><span class="w"> </span><span class="na">command=</span><span class="s">&quot;load&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;controller_spawner&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;controller_manager&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;spawner&quot;</span><span class="w"> </span><span class="na">respawn=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="w"> </span><span class="na">ns=</span><span class="s">&quot;/MOJROBOT&quot;</span><span class="w"> </span>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="w">        </span><span class="na">args=</span><span class="s">&quot;joint_state_controller&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">respawn=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="w">        </span><span class="nt">&lt;remap</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;/joint_states&quot;</span><span class="w"> </span><span class="na">to=</span><span class="s">&quot;/MOJROBOT/joint_states&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a><span class="w">    </span><span class="nt">&lt;/node&gt;</span>
</code></pre></div>
<p>Run the launc file <code>roslaunch robot_2dof zagon_gazebo.launch</code>.</p>
<p>Now we can observe the joint angles. Type into terminal window command <code>rostopic list</code>, we get the list of topics</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>/MOJROBOT/gazebo_ros_control/pid_gains/drugi_sklep/parameter_descriptions
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>/MOJROBOT/gazebo_ros_control/pid_gains/drugi_sklep/parameter_updates
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>/MOJROBOT/gazebo_ros_control/pid_gains/prvi_sklep/parameter_descriptions
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>/MOJROBOT/gazebo_ros_control/pid_gains/prvi_sklep/parameter_updates
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>/MOJROBOT/joint_states
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>/clock
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a>/gazebo/link_states
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a>/gazebo/model_states
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a>/gazebo/parameter_descriptions
<a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a>/gazebo/parameter_updates
<a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a>/gazebo/set_link_state
<a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a>/gazebo/set_model_state
<a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a>/joint_states
<a id="__codelineno-33-14" name="__codelineno-33-14" href="#__codelineno-33-14"></a>/rosout
<a id="__codelineno-33-15" name="__codelineno-33-15" href="#__codelineno-33-15"></a>/rosout_agg
<a id="__codelineno-33-16" name="__codelineno-33-16" href="#__codelineno-33-16"></a>/tf
<a id="__codelineno-33-17" name="__codelineno-33-17" href="#__codelineno-33-17"></a>/tf_static
</code></pre></div>
<p>Run command <code>rostopic echo /MOJROBOT/joint_states</code> and you can now track joint angles.</p>
<p>However, we want not just observe joint angles, but also control the robot. We need to add the controller for the individual joints. We will do that by adding joint controller <code>joint_controller</code>. We will first add it to <code>launch</code> file to the <code>controller_spawner</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;controller_spawner&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;controller_manager&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;spawner&quot;</span><span class="w"> </span><span class="na">respawn=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="w"> </span><span class="na">ns=</span><span class="s">&quot;/MOJROBOT&quot;</span><span class="w"> </span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="w">        </span><span class="na">args=</span><span class="s">&quot;joint_state_controller</span>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="s">        joint_controller&quot;</span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!--Add this new line--&gt;</span>
</code></pre></div>
<p>Next we need to add it to the <code>yaml</code> file:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="nt">MOJROBOT</span><span class="p">:</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="w">  </span><span class="c1"># publish all joint states:</span>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="w">  </span><span class="nt">joint_state_controller</span><span class="p">:</span>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">joint_state_controller/JointStateController</span>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="w">    </span><span class="nt">publish_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="w">  </span><span class="nt">joint_controller</span><span class="p">:</span><span class="w"> </span><span class="c1">#Add this new line</span>
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">position_controllers/JointTrajectoryController</span><span class="w"> </span><span class="c1">#Add this new line</span>
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="w">    </span><span class="nt">joints</span><span class="p">:</span><span class="w"> </span><span class="c1">#Add this new line</span>
<a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prvi_sklep</span><span class="w"> </span><span class="c1">#Add this new line</span>
<a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">drugi_sklep</span><span class="w"> </span><span class="c1">#Add this new line</span>
</code></pre></div>
<p>Now when we run the launch file, we get new rostopics:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>/MOJROBOT/joint_controller/command
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>/MOJROBOT/joint_controller/follow_joint_trajectory/cancel
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>/MOJROBOT/joint_controller/follow_joint_trajectory/feedback
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>/MOJROBOT/joint_controller/follow_joint_trajectory/goal
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>/MOJROBOT/joint_controller/follow_joint_trajectory/result
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a>/MOJROBOT/joint_controller/follow_joint_trajectory/status
<a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a>/MOJROBOT/joint_controller/state
</code></pre></div>
<p>If we type command <code>rostopic info /MOJROBOT/joint_controller/command</code> we can see which type of message we need to publish to control the robot joints:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>Type:<span class="w"> </span>trajectory_msgs/JointTrajectory
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>Publishers:<span class="w"> </span>None
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a>Subscribers:<span class="w"> </span>
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="w"> </span>*<span class="w"> </span>/gazebo<span class="w"> </span><span class="o">(</span>http://lr-omen:35047/<span class="o">)</span>
</code></pre></div>
<p>To move the robot we need to publish the following message:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>rostopic<span class="w"> </span>pub<span class="w"> </span>/MOJROBOT/joint_controller/command<span class="w"> </span>trajectory_msgs/JointTrajectory<span class="w"> </span><span class="s1">&#39;{joint_names:[&quot;prvi_sklep&quot;,&quot;drugi_sklep&quot;],points:[{positions:[-0.5, 0.2], time_from_start:[1,0]}]}&#39;</span>
</code></pre></div>
<p>The full files content of the files until this point is <a href="#snapshot-1">linked</a> bellow.</p>
<h3 id="controlling-the-2dof-robot-using-moveit">Controlling the 2DOF robot using MoveIt</h3>
<p>The aim of this section is to use MoveIt package to send the commands to the Gazebo simulation of the robot. Full documentation for MoveIt is <a href="http://docs.ros.org/en/melodic/api/moveit_tutorials/html/index.html">http://docs.ros.org/en/melodic/api/moveit_tutorials/html/index.html</a>.
We will use MoveIt Setup Assistant to create MoveIt configuration for our 2DOF robot. We will closely follow the <a href="http://docs.ros.org/en/melodic/api/moveit_tutorials/html/doc/setup_assistant/setup_assistant_tutorial.html">tutorial</a> published on MoveIt page. Here we will give really short overview.</p>
<!---
[//]: # (Comment)```
[//]: # (Comment)sudo apt-get install ros-melodic-moveit
[//]: # (Comment)sudo apt-get install ros-melodic-moveit-setup-assistant
[//]: # (Comment)cd src/
[//]: # (Comment)git clone -b melodic-devel https://github.com/ros-planning/moveit_tutorials.git
[//]: # (Comment)rosdep install -y --from-paths . --ignore-src --rosdistro melodic
[//]: # (Comment)cd ..
[//]: # (Comment)catkin_make
[//]: # (Comment)```
-->

<p>In terminal run command <code>roslaunch moveit_setup_assistant setup_assistant.launch</code>.</p>
<ol>
<li>
<p>In <em>Start</em> tab select <em>Create New MoveIt Configuration Package</em> and browse for <code>robot2dof.urdf</code> file. Load the file.
  <img alt="MoveIt Setup Assistant" src="images/Screenshot%20from%202022-07-08%2010-54-30.png" />
  <img alt="MoveIt Setup Assistant" src="images/Screenshot%20from%202022-07-08%2010-55-15.png" />  </p>
</li>
<li>
<p><em>Self-Collisins</em> tab.  Click on the <em>Generate Collision Matrix</em> button
  <img alt="*Self-Collisins* tab" src="images/Screenshot%20from%202022-07-08%2010-57-05.png" /></p>
</li>
<li>
<p><em>Planning groups</em> tab. Clock on <em>Click on Add Group</em>. You will be presented by new window.</p>
</li>
<li>Enter <em>Group Name</em> as <strong>arm</strong>.</li>
<li>Choose <em>kdl_kinematics_plugin/KDLKinematicsPlugin</em> as the kinematics solver.</li>
<li>
<p>Click on the <em>Add Joints</em> button. You will bepresented by new window. Choose the appropriate joints. See figure bellow. Click <em>Save</em>.
    <img alt="*Planning groups* tab" src="images/Screenshot%20from%202022-07-08%2011-00-52.png" /></p>
</li>
<li>
<p>Next figure shows most basic definition for the 2DOF robot.
    <img alt="*Planning groups* tab" src="images/Screenshot%20from%202022-07-08%2011-01-52.png" /></p>
</li>
<li>
<p><em>End Effectors</em> tab. Click <em>Add End Effector</em>. You will be presented by new window.</p>
</li>
<li>Choose <strong>TCP</strong> as the <em>End Effector Name</em>.</li>
<li>
<p>Choose <strong>TCP_segment</strong> as the <em>Parent Link</em> for this end-effector. Click <em>Save</em>.
    <img alt="*End Effectors* tab" src="images/Screenshot%20from%202022-07-08%2011-13-03.png" />
    <img alt="*End Effectors* tab" src="images/Screenshot%20from%202022-07-08%2011-15-27.png" /></p>
</li>
<li>
<p><em>ROS Control</em> tab. Click on <em>Add Controller</em>. Add <em><em>MOJROBOT/arm_controller</em> for </em>Controller Name<em> and choose </em>controller type<em>. See figure bellow. Click </em>Save<em> . You might get error </em>Invalid ROS controller name<em>. If you get the error close the error dialog. Click the button </em>Auto Add FollowJointsTrajectory Controllers For Each Planning Group*. We will add the correct controller manually later.
    <img alt="*Add Controller*" src="images/Screenshot%20from%202022-07-08%2011-19-01.png" />
    <img alt="*Add Controller*" src="images/Screenshot%20from%202022-07-08%2011-21-58.png" /></p>
</li>
<li>
<p><em>Author Information</em> tab. Enter your name and email address.</p>
</li>
<li><em>Configuration Files</em> tab. Create folder <code>robot_2dof_moveit_config</code> in <code>src</code> folder of your workspace. Browse for that folder and click <em>Generate Package</em> button. The Setup Assistant will now generate and write a set of launch and config files.
    <img alt="*Configuration Files*" src="images/Screenshot%20from%202022-07-08%2011-26-35.png" /></li>
</ol>
<p>Now that we have created the MoveIt configuration files, we need to edit them so that they can be used with Gazebo. The auto-generated launch and config files are not ready for use in Gazebo. If you run command in terminal <code>roslaunch robot_2dof_moveit_config demo_gazebo.launch</code> you will se that in rviz you can plan movement, but when you want to execurte them the robot in Gazebo does not move. MoveIt generates the file <code>ros_controllers.yaml</code> which is missing definition for <code>controller_list</code>. We also need to add the namespace for our robot.
The required steps are:</p>
<ol>
<li>File <code>ros_controllers.yaml</code>. Add definition for namespace and controller list.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="c1"># Publish all joint states</span>
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="c1"># Creates the /joint_states topic necessary in ROS</span>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="nt">MOJROBOT</span><span class="p">:</span>
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="w">  </span><span class="nt">joint_state_controller</span><span class="p">:</span>
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">joint_state_controller/JointStateController</span>
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a><span class="w">    </span><span class="nt">publish_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
<a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a><span class="w">  </span><span class="nt">arm_controller</span><span class="p">:</span>
<a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">position_controllers/JointTrajectoryController</span>
<a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a><span class="w">    </span><span class="nt">joints</span><span class="p">:</span>
<a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prvi_sklep</span>
<a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">drugi_sklep</span>
<a id="__codelineno-39-12" name="__codelineno-39-12" href="#__codelineno-39-12"></a><span class="w">    </span><span class="nt">gains</span><span class="p">:</span>
<a id="__codelineno-39-13" name="__codelineno-39-13" href="#__codelineno-39-13"></a><span class="w">      </span><span class="nt">prvi_sklep</span><span class="p">:</span>
<a id="__codelineno-39-14" name="__codelineno-39-14" href="#__codelineno-39-14"></a><span class="w">        </span><span class="nt">p</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<a id="__codelineno-39-15" name="__codelineno-39-15" href="#__codelineno-39-15"></a><span class="w">        </span><span class="nt">d</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-39-16" name="__codelineno-39-16" href="#__codelineno-39-16"></a><span class="w">        </span><span class="nt">i</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-39-17" name="__codelineno-39-17" href="#__codelineno-39-17"></a><span class="w">        </span><span class="nt">i_clamp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-39-18" name="__codelineno-39-18" href="#__codelineno-39-18"></a><span class="w">      </span><span class="nt">drugi_sklep</span><span class="p">:</span>
<a id="__codelineno-39-19" name="__codelineno-39-19" href="#__codelineno-39-19"></a><span class="w">        </span><span class="nt">p</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<a id="__codelineno-39-20" name="__codelineno-39-20" href="#__codelineno-39-20"></a><span class="w">        </span><span class="nt">d</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-39-21" name="__codelineno-39-21" href="#__codelineno-39-21"></a><span class="w">        </span><span class="nt">i</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-39-22" name="__codelineno-39-22" href="#__codelineno-39-22"></a><span class="w">        </span><span class="nt">i_clamp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-39-23" name="__codelineno-39-23" href="#__codelineno-39-23"></a>
<a id="__codelineno-39-24" name="__codelineno-39-24" href="#__codelineno-39-24"></a><span class="nt">controller_list</span><span class="p">:</span>
<a id="__codelineno-39-25" name="__codelineno-39-25" href="#__codelineno-39-25"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MOJROBOT/arm_controller</span>
<a id="__codelineno-39-26" name="__codelineno-39-26" href="#__codelineno-39-26"></a><span class="w">    </span><span class="nt">action_ns</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">follow_joint_trajectory</span>
<a id="__codelineno-39-27" name="__codelineno-39-27" href="#__codelineno-39-27"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FollowJointTrajectory</span>
<a id="__codelineno-39-28" name="__codelineno-39-28" href="#__codelineno-39-28"></a><span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-39-29" name="__codelineno-39-29" href="#__codelineno-39-29"></a><span class="w">    </span><span class="nt">joints</span><span class="p">:</span>
<a id="__codelineno-39-30" name="__codelineno-39-30" href="#__codelineno-39-30"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prvi_sklep</span>
<a id="__codelineno-39-31" name="__codelineno-39-31" href="#__codelineno-39-31"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">drugi_sklep</span><span class="w">  </span>
</code></pre></div>
<ol>
<li>File <code>ros_controllers.launch</code>. This launch file loads Gazebo controllers. We need to add additional controllers to <code>controller_spawner</code> node:</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="w">  </span><span class="cm">&lt;!-- Load the controllers --&gt;</span>
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="w">  </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;controller_spawner&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;controller_manager&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;spawner&quot;</span><span class="w"> </span><span class="na">respawn=</span><span class="s">&quot;false&quot;</span>
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="w">    </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;--namespace=/MOJROBOT</span>
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="s">    joint_state_controller</span>
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a><span class="s">    arm_controller</span>
<a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a><span class="s">    --timeout 20&quot;</span><span class="nt">/&gt;</span>
</code></pre></div>
<ol>
<li>
<p>File <code>demo_gazebo.launch</code>. Definition for node <code>joint_state_publisher</code> has to be changed. Also for <code>rosparam</code> <code>source_list</code> you need to add correct namespace. Replace the following lines</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">unless=</span><span class="s">&quot;$(arg use_gui)&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="w">    </span><span class="nt">&lt;rosparam</span><span class="w"> </span><span class="na">param=</span><span class="s">&quot;source_list&quot;</span><span class="nt">&gt;</span>[move_group/fake_controller_joint_states]<span class="nt">&lt;/rosparam&gt;</span>
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="w">    </span><span class="nt">&lt;rosparam</span><span class="w"> </span><span class="na">param=</span><span class="s">&quot;source_list&quot;</span><span class="nt">&gt;</span>[joint_states]<span class="nt">&lt;/rosparam&gt;</span>
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="nt">&lt;/node&gt;</span>
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;joint_state_publisher_gui&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;joint_state_publisher_gui&quot;</span><span class="w"> </span><span class="na">if=</span><span class="s">&quot;$(arg use_gui)&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a><span class="w">    </span><span class="nt">&lt;rosparam</span><span class="w"> </span><span class="na">param=</span><span class="s">&quot;source_list&quot;</span><span class="nt">&gt;</span>[move_group/fake_controller_joint_states]<span class="nt">&lt;/rosparam&gt;</span>
<a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a><span class="w">    </span><span class="nt">&lt;rosparam</span><span class="w"> </span><span class="na">param=</span><span class="s">&quot;source_list&quot;</span><span class="nt">&gt;</span>[joint_states]<span class="nt">&lt;/rosparam&gt;</span>
<a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a><span class="w">    </span><span class="nt">&lt;/node&gt;</span>
</code></pre></div>
<p>with</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;use_gui&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg use_gui)&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="w">    </span><span class="nt">&lt;rosparam</span><span class="w"> </span><span class="na">param=</span><span class="s">&quot;source_list&quot;</span><span class="nt">&gt;</span>[MOJROBOT/joint_states]<span class="nt">&lt;/rosparam&gt;</span>
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="nt">&lt;/node&gt;</span>
</code></pre></div>
</li>
</ol>
<p>The full files content of the files until this point is <a href="#snapshot-2">linked</a> bellow.</p>
<p>A relatively short explanation of the above process can be found on
<a href="https://medium.com/@tahsincankose/custom-manipulator-simulation-in-gazebo-and-motion-planning-with-moveit-c017eef1ea90">https://medium.com/@tahsincankose/custom-manipulator-simulation-in-gazebo-and-motion-planning-with-moveit-c017eef1ea90</a></p>
<p>Now when you run command <code>roslaunch robot_2dof_moveit_config demo_gazebo.launch</code> you can move robot in Gazebo.</p>
<p><img alt="Moving the robot in Gazebo with MoveIt" src="images/Screenshot%20from%202022-07-08%2012-38-45.png" /></p>
<h3 id="sensors">Sensors</h3>
<p>We can add various sensors to the robot in <code>urdf</code> file. Typically we need to create a link for the sensor and a fixed joint to add the link to the link of the robot. Finally we add <code>gazebo</code> and <code>sensor</code> tag with appropriate <code>plugin</code> and parameters for the sensor.</p>
<h4 id="camera-sensor">Camera sensor</h4>
<p>First we add a link and a joint for the camera sensor in the <code>urdf</code> file for the robot.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera_link&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a><span class="w">                </span><span class="nt">&lt;box</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;0.05 0.05 0.05&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Black&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
<a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a><span class="w">        </span><span class="nt">&lt;inertial&gt;</span>
<a id="__codelineno-43-10" name="__codelineno-43-10" href="#__codelineno-43-10"></a><span class="w">            </span><span class="nt">&lt;mass</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1e-5&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-43-11" name="__codelineno-43-11" href="#__codelineno-43-11"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-43-12" name="__codelineno-43-12" href="#__codelineno-43-12"></a><span class="w">            </span><span class="nt">&lt;inertia</span><span class="w"> </span><span class="na">ixx=</span><span class="s">&quot;1e-6&quot;</span><span class="w"> </span><span class="na">ixy=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">ixz=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">iyy=</span><span class="s">&quot;1e-6&quot;</span><span class="w"> </span><span class="na">iyz=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">izz=</span><span class="s">&quot;1e-6&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-43-13" name="__codelineno-43-13" href="#__codelineno-43-13"></a><span class="w">        </span><span class="nt">&lt;/inertial&gt;</span>
<a id="__codelineno-43-14" name="__codelineno-43-14" href="#__codelineno-43-14"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span><span class="w">   </span>
<a id="__codelineno-43-15" name="__codelineno-43-15" href="#__codelineno-43-15"></a>
<a id="__codelineno-43-16" name="__codelineno-43-16" href="#__codelineno-43-16"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera_joint&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-43-17" name="__codelineno-43-17" href="#__codelineno-43-17"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.06&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-43-18" name="__codelineno-43-18" href="#__codelineno-43-18"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;TCP_segment&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-43-19" name="__codelineno-43-19" href="#__codelineno-43-19"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;camera_link&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-43-20" name="__codelineno-43-20" href="#__codelineno-43-20"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
</code></pre></div>
<p>Next we add the plugin and input camera parameters.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="w">    </span><span class="cm">&lt;!-- camera --&gt;</span>
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="w">    </span><span class="nt">&lt;gazebo</span><span class="w"> </span><span class="na">reference=</span><span class="s">&quot;camera_link&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="w">    </span><span class="nt">&lt;material&gt;</span>Gazebo/Black<span class="nt">&lt;/material&gt;</span>
<a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a><span class="w">        </span><span class="nt">&lt;sensor</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;camera&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera1&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a><span class="w">            </span><span class="nt">&lt;update_rate&gt;</span>30.0<span class="nt">&lt;/update_rate&gt;</span>
<a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a><span class="w">            </span><span class="nt">&lt;camera</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;head&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a><span class="w">                </span><span class="nt">&lt;horizontal_fov&gt;</span>1.3962634<span class="nt">&lt;/horizontal_fov&gt;</span>
<a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a><span class="w">                </span><span class="nt">&lt;image&gt;</span>
<a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a><span class="w">                    </span><span class="nt">&lt;width&gt;</span>800<span class="nt">&lt;/width&gt;</span>
<a id="__codelineno-44-10" name="__codelineno-44-10" href="#__codelineno-44-10"></a><span class="w">                    </span><span class="nt">&lt;height&gt;</span>800<span class="nt">&lt;/height&gt;</span>
<a id="__codelineno-44-11" name="__codelineno-44-11" href="#__codelineno-44-11"></a><span class="w">                    </span><span class="nt">&lt;format&gt;</span>R8G8B8<span class="nt">&lt;/format&gt;</span>
<a id="__codelineno-44-12" name="__codelineno-44-12" href="#__codelineno-44-12"></a><span class="w">                </span><span class="nt">&lt;/image&gt;</span>
<a id="__codelineno-44-13" name="__codelineno-44-13" href="#__codelineno-44-13"></a><span class="w">                </span><span class="nt">&lt;clip&gt;</span>
<a id="__codelineno-44-14" name="__codelineno-44-14" href="#__codelineno-44-14"></a><span class="w">                    </span><span class="nt">&lt;near&gt;</span>0.02<span class="nt">&lt;/near&gt;</span>
<a id="__codelineno-44-15" name="__codelineno-44-15" href="#__codelineno-44-15"></a><span class="w">                    </span><span class="nt">&lt;far&gt;</span>300<span class="nt">&lt;/far&gt;</span>
<a id="__codelineno-44-16" name="__codelineno-44-16" href="#__codelineno-44-16"></a><span class="w">                </span><span class="nt">&lt;/clip&gt;</span>
<a id="__codelineno-44-17" name="__codelineno-44-17" href="#__codelineno-44-17"></a><span class="w">                </span><span class="nt">&lt;noise&gt;</span>
<a id="__codelineno-44-18" name="__codelineno-44-18" href="#__codelineno-44-18"></a><span class="w">                    </span><span class="nt">&lt;type&gt;</span>gaussian<span class="nt">&lt;/type&gt;</span>
<a id="__codelineno-44-19" name="__codelineno-44-19" href="#__codelineno-44-19"></a><span class="w">                    </span><span class="nt">&lt;mean&gt;</span>0.0<span class="nt">&lt;/mean&gt;</span>
<a id="__codelineno-44-20" name="__codelineno-44-20" href="#__codelineno-44-20"></a><span class="w">                    </span><span class="nt">&lt;stddev&gt;</span>0.007<span class="nt">&lt;/stddev&gt;</span>
<a id="__codelineno-44-21" name="__codelineno-44-21" href="#__codelineno-44-21"></a><span class="w">                </span><span class="nt">&lt;/noise&gt;</span>
<a id="__codelineno-44-22" name="__codelineno-44-22" href="#__codelineno-44-22"></a><span class="w">            </span><span class="nt">&lt;/camera&gt;</span>
<a id="__codelineno-44-23" name="__codelineno-44-23" href="#__codelineno-44-23"></a><span class="w">            </span><span class="nt">&lt;plugin</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera_controller&quot;</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;libgazebo_ros_camera.so&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-44-24" name="__codelineno-44-24" href="#__codelineno-44-24"></a><span class="w">                </span><span class="nt">&lt;alwaysOn&gt;</span>true<span class="nt">&lt;/alwaysOn&gt;</span>
<a id="__codelineno-44-25" name="__codelineno-44-25" href="#__codelineno-44-25"></a><span class="w">                </span><span class="nt">&lt;updateRate&gt;</span>0.0<span class="nt">&lt;/updateRate&gt;</span>
<a id="__codelineno-44-26" name="__codelineno-44-26" href="#__codelineno-44-26"></a><span class="w">                </span><span class="nt">&lt;cameraName&gt;</span>robot_2dof/camera1<span class="nt">&lt;/cameraName&gt;</span>
<a id="__codelineno-44-27" name="__codelineno-44-27" href="#__codelineno-44-27"></a><span class="w">                </span><span class="nt">&lt;imageTopicName&gt;</span>image_raw<span class="nt">&lt;/imageTopicName&gt;</span>
<a id="__codelineno-44-28" name="__codelineno-44-28" href="#__codelineno-44-28"></a><span class="w">                </span><span class="nt">&lt;cameraInfoTopicName&gt;</span>camera_info<span class="nt">&lt;/cameraInfoTopicName&gt;</span>
<a id="__codelineno-44-29" name="__codelineno-44-29" href="#__codelineno-44-29"></a><span class="w">                </span><span class="nt">&lt;frameName&gt;</span>camera_link<span class="nt">&lt;/frameName&gt;</span>
<a id="__codelineno-44-30" name="__codelineno-44-30" href="#__codelineno-44-30"></a><span class="w">                </span><span class="nt">&lt;hackBaseline&gt;</span>0.07<span class="nt">&lt;/hackBaseline&gt;</span>
<a id="__codelineno-44-31" name="__codelineno-44-31" href="#__codelineno-44-31"></a><span class="w">                </span><span class="nt">&lt;distortionK1&gt;</span>0.0<span class="nt">&lt;/distortionK1&gt;</span>
<a id="__codelineno-44-32" name="__codelineno-44-32" href="#__codelineno-44-32"></a><span class="w">                </span><span class="nt">&lt;distortionK2&gt;</span>0.0<span class="nt">&lt;/distortionK2&gt;</span>
<a id="__codelineno-44-33" name="__codelineno-44-33" href="#__codelineno-44-33"></a><span class="w">                </span><span class="nt">&lt;distortionK3&gt;</span>0.0<span class="nt">&lt;/distortionK3&gt;</span>
<a id="__codelineno-44-34" name="__codelineno-44-34" href="#__codelineno-44-34"></a><span class="w">                </span><span class="nt">&lt;distortionT1&gt;</span>0.0<span class="nt">&lt;/distortionT1&gt;</span>
<a id="__codelineno-44-35" name="__codelineno-44-35" href="#__codelineno-44-35"></a><span class="w">                </span><span class="nt">&lt;distortionT2&gt;</span>0.0<span class="nt">&lt;/distortionT2&gt;</span>
<a id="__codelineno-44-36" name="__codelineno-44-36" href="#__codelineno-44-36"></a><span class="w">            </span><span class="nt">&lt;/plugin&gt;</span>
<a id="__codelineno-44-37" name="__codelineno-44-37" href="#__codelineno-44-37"></a><span class="w">        </span><span class="nt">&lt;/sensor&gt;</span>
<a id="__codelineno-44-38" name="__codelineno-44-38" href="#__codelineno-44-38"></a><span class="w">    </span><span class="nt">&lt;/gazebo&gt;</span><span class="w"> </span>
</code></pre></div>
<h4 id="laser-sensor">Laser sensor</h4>
<p>First we add a link and a joint for the laser sensor in the <code>urdf</code> file for the robot.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="w">    </span><span class="cm">&lt;!-- Sick Laser --&gt;</span>
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;sick_link&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a><span class="w">        </span><span class="nt">&lt;collision&gt;</span>
<a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a><span class="w">                </span><span class="nt">&lt;box</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;0.1 0.1 0.1&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a><span class="w">        </span><span class="nt">&lt;/collision&gt;</span>
<a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a>
<a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
<a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-45-13" name="__codelineno-45-13" href="#__codelineno-45-13"></a><span class="w">                </span><span class="cm">&lt;!--&lt;mesh filename=&quot;package://rrbot_description/meshes/hokuyo.dae&quot;/&gt;--&gt;</span>
<a id="__codelineno-45-14" name="__codelineno-45-14" href="#__codelineno-45-14"></a><span class="w">                </span><span class="nt">&lt;box</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;0.1 0.1 0.1&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-45-15" name="__codelineno-45-15" href="#__codelineno-45-15"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-45-16" name="__codelineno-45-16" href="#__codelineno-45-16"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
<a id="__codelineno-45-17" name="__codelineno-45-17" href="#__codelineno-45-17"></a>
<a id="__codelineno-45-18" name="__codelineno-45-18" href="#__codelineno-45-18"></a><span class="w">        </span><span class="nt">&lt;inertial&gt;</span>
<a id="__codelineno-45-19" name="__codelineno-45-19" href="#__codelineno-45-19"></a><span class="w">            </span><span class="nt">&lt;mass</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1e-5&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-45-20" name="__codelineno-45-20" href="#__codelineno-45-20"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-45-21" name="__codelineno-45-21" href="#__codelineno-45-21"></a><span class="w">            </span><span class="nt">&lt;inertia</span><span class="w"> </span><span class="na">ixx=</span><span class="s">&quot;1e-6&quot;</span><span class="w"> </span><span class="na">ixy=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">ixz=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">iyy=</span><span class="s">&quot;1e-6&quot;</span><span class="w"> </span><span class="na">iyz=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">izz=</span><span class="s">&quot;1e-6&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-45-22" name="__codelineno-45-22" href="#__codelineno-45-22"></a><span class="w">        </span><span class="nt">&lt;/inertial&gt;</span>
<a id="__codelineno-45-23" name="__codelineno-45-23" href="#__codelineno-45-23"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
<a id="__codelineno-45-24" name="__codelineno-45-24" href="#__codelineno-45-24"></a>
<a id="__codelineno-45-25" name="__codelineno-45-25" href="#__codelineno-45-25"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;sick_joint&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-45-26" name="__codelineno-45-26" href="#__codelineno-45-26"></a><span class="w">        </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 1 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-45-27" name="__codelineno-45-27" href="#__codelineno-45-27"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0.5 0.2&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-45-28" name="__codelineno-45-28" href="#__codelineno-45-28"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;world&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-45-29" name="__codelineno-45-29" href="#__codelineno-45-29"></a><span class="w">        </span><span class="cm">&lt;!--&lt;parent link=&quot;TCP_segment&quot;/&gt;--&gt;</span>
<a id="__codelineno-45-30" name="__codelineno-45-30" href="#__codelineno-45-30"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;sick_link&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-45-31" name="__codelineno-45-31" href="#__codelineno-45-31"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span><span class="w">    </span>
</code></pre></div>
<p>Next we add the plugin and input sensor parameters.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="w">    </span><span class="cm">&lt;!-- sick --&gt;</span>
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="w">    </span><span class="nt">&lt;gazebo</span><span class="w"> </span><span class="na">reference=</span><span class="s">&quot;sick_link&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="w">        </span><span class="nt">&lt;sensor</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;ray&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;head_sick_sensor&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="w">            </span><span class="nt">&lt;pose&gt;</span>0<span class="w"> </span>0<span class="w"> </span>0<span class="w"> </span>0<span class="w"> </span>0<span class="w"> </span>0<span class="nt">&lt;/pose&gt;</span>
<a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a><span class="w">            </span><span class="nt">&lt;visualize&gt;</span>true<span class="nt">&lt;/visualize&gt;</span>
<a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a><span class="w">            </span><span class="nt">&lt;update_rate&gt;</span>40<span class="nt">&lt;/update_rate&gt;</span>
<a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a><span class="w">            </span><span class="nt">&lt;ray&gt;</span>
<a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a><span class="w">                </span><span class="nt">&lt;scan&gt;</span>
<a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a><span class="w">                    </span><span class="nt">&lt;horizontal&gt;</span>
<a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a><span class="w">                        </span><span class="nt">&lt;samples&gt;</span>720<span class="nt">&lt;/samples&gt;</span>
<a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a><span class="w">                        </span><span class="nt">&lt;resolution&gt;</span>1<span class="nt">&lt;/resolution&gt;</span>
<a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a><span class="w">                        </span><span class="nt">&lt;min_angle&gt;</span>-1.570796<span class="nt">&lt;/min_angle&gt;</span>
<a id="__codelineno-46-13" name="__codelineno-46-13" href="#__codelineno-46-13"></a><span class="w">                        </span><span class="nt">&lt;max_angle&gt;</span>1.570796<span class="nt">&lt;/max_angle&gt;</span>
<a id="__codelineno-46-14" name="__codelineno-46-14" href="#__codelineno-46-14"></a><span class="w">                    </span><span class="nt">&lt;/horizontal&gt;</span>
<a id="__codelineno-46-15" name="__codelineno-46-15" href="#__codelineno-46-15"></a><span class="w">                </span><span class="nt">&lt;/scan&gt;</span>
<a id="__codelineno-46-16" name="__codelineno-46-16" href="#__codelineno-46-16"></a><span class="w">                </span><span class="nt">&lt;range&gt;</span>
<a id="__codelineno-46-17" name="__codelineno-46-17" href="#__codelineno-46-17"></a><span class="w">                    </span><span class="nt">&lt;min&gt;</span>0.10<span class="nt">&lt;/min&gt;</span>
<a id="__codelineno-46-18" name="__codelineno-46-18" href="#__codelineno-46-18"></a><span class="w">                    </span><span class="nt">&lt;max&gt;</span>30.0<span class="nt">&lt;/max&gt;</span>
<a id="__codelineno-46-19" name="__codelineno-46-19" href="#__codelineno-46-19"></a><span class="w">                    </span><span class="nt">&lt;resolution&gt;</span>0.01<span class="nt">&lt;/resolution&gt;</span>
<a id="__codelineno-46-20" name="__codelineno-46-20" href="#__codelineno-46-20"></a><span class="w">                </span><span class="nt">&lt;/range&gt;</span>
<a id="__codelineno-46-21" name="__codelineno-46-21" href="#__codelineno-46-21"></a><span class="w">                </span><span class="nt">&lt;noise&gt;</span>
<a id="__codelineno-46-22" name="__codelineno-46-22" href="#__codelineno-46-22"></a><span class="w">                    </span><span class="nt">&lt;type&gt;</span>gaussian<span class="nt">&lt;/type&gt;</span>
<a id="__codelineno-46-23" name="__codelineno-46-23" href="#__codelineno-46-23"></a><span class="w">                    </span><span class="cm">&lt;!-- Noise parameters based on published spec for Hokuyo laser</span>
<a id="__codelineno-46-24" name="__codelineno-46-24" href="#__codelineno-46-24"></a><span class="cm">                    achieving &quot;+-30mm&quot; accuracy at range &lt; 10m.  A mean of 0.0m and</span>
<a id="__codelineno-46-25" name="__codelineno-46-25" href="#__codelineno-46-25"></a><span class="cm">                    stddev of 0.01m will put 99.7% of samples within 0.03m of the true</span>
<a id="__codelineno-46-26" name="__codelineno-46-26" href="#__codelineno-46-26"></a><span class="cm">                    reading. --&gt;</span>
<a id="__codelineno-46-27" name="__codelineno-46-27" href="#__codelineno-46-27"></a><span class="w">                    </span><span class="nt">&lt;mean&gt;</span>0.0<span class="nt">&lt;/mean&gt;</span>
<a id="__codelineno-46-28" name="__codelineno-46-28" href="#__codelineno-46-28"></a><span class="w">                    </span><span class="nt">&lt;stddev&gt;</span>0.01<span class="nt">&lt;/stddev&gt;</span>
<a id="__codelineno-46-29" name="__codelineno-46-29" href="#__codelineno-46-29"></a><span class="w">                </span><span class="nt">&lt;/noise&gt;</span>
<a id="__codelineno-46-30" name="__codelineno-46-30" href="#__codelineno-46-30"></a><span class="w">            </span><span class="nt">&lt;/ray&gt;</span>
<a id="__codelineno-46-31" name="__codelineno-46-31" href="#__codelineno-46-31"></a><span class="w">            </span><span class="nt">&lt;plugin</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;gazebo_ros_head_sick_controller&quot;</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;libgazebo_ros_laser.so&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-46-32" name="__codelineno-46-32" href="#__codelineno-46-32"></a><span class="w">                </span><span class="nt">&lt;topicName&gt;</span>/robot_2dof/laser/scan<span class="nt">&lt;/topicName&gt;</span>
<a id="__codelineno-46-33" name="__codelineno-46-33" href="#__codelineno-46-33"></a><span class="w">                </span><span class="nt">&lt;frameName&gt;</span>sick_link<span class="nt">&lt;/frameName&gt;</span>
<a id="__codelineno-46-34" name="__codelineno-46-34" href="#__codelineno-46-34"></a><span class="w">            </span><span class="nt">&lt;/plugin&gt;</span>
<a id="__codelineno-46-35" name="__codelineno-46-35" href="#__codelineno-46-35"></a><span class="w">        </span><span class="nt">&lt;/sensor&gt;</span>
<a id="__codelineno-46-36" name="__codelineno-46-36" href="#__codelineno-46-36"></a><span class="w">    </span><span class="nt">&lt;/gazebo&gt;</span>
</code></pre></div>
<h3 id="warehouse-environment">Warehouse environment</h3>
<p>We will add the model for warehouse environment.</p>
<p>Copy file <a href="warehouse.zip">warehouse.zip</a> into folder <code>robot_2dof_moveit_config</code> and unzip it. You must unzip it directly into folder <code>robot_2dof_moveit_config</code> so that the folder contains new folders <code>worlds</code>, <code>meshes</code> and <code>models</code>.</p>
<p>In <code>gazebo.launch</code> change the line</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;world_name&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;worlds/empty.world&quot;</span><span class="nt">/&gt;</span>
</code></pre></div>
<p>with</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;world_name&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(find robot_2dof_moveit_config)/worlds/warehouse_2.world&quot;</span><span class="nt">/&gt;</span>
</code></pre></div>
<p>Before the line</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="w">  </span><span class="cm">&lt;!-- startup simulated world --&gt;</span>
</code></pre></div>
<p>Add the following lines</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="w">  </span><span class="cm">&lt;!-- warehouse simulation environment --&gt;</span>
<a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="w">  </span><span class="nt">&lt;env</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;GAZEBO_MODEL_PATH&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${GAZEBO_MODEL_PATH}:$(find robot_2dof_moveit_config)/models&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="w">  </span><span class="nt">&lt;env</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;GAZEBO_RESOURCE_PATH&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${GAZEBO_RESOURCE_PATH}:$(find robot_2dof_moveit_config)/models&quot;</span><span class="nt">/&gt;</span><span class="w"> </span>
</code></pre></div>
<p>File <code>warehouse_2.world</code> contains description of the warehouse environment.</p>
<p><img alt="Warehouse environment rviz" src="images/Screenshot%20from%202022-07-27%2013-18-05.png" /></p>
<p><img alt="Warehouse environment gazebo" src="images/Screenshot%20from%202022-07-27%2013-18-13.png" /></p>
<!--
### Franka Panda robot visualization

<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>roslaunch franka_gazebo panda.launch x:=-0.5 \
<a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a>    controller:=position_joint_trajectory_controller \
<a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a>    rviz:=true
</code></pre></div>

<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>rostopic info /position_joint_trajectory_controller/command
</code></pre></div>

<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>rostopic pub /position_joint_trajectory_controller/command trajectory_msgs/JointTrajectory &#39;{joint_names:[&quot;panda_joint1&quot;, &quot;panda_joint2&quot;, &quot;panda_joint3&quot;, &quot;panda_joint4&quot;, &quot;panda_joint5&quot;, &quot;panda_joint6&quot;, &quot;panda_joint7&quot;], points:[{positions:[1.0001325654178492286, -0.7856323608954296, -2.3382642150515665e-05, -2.355961433795475, -8.569228689303543e-06, 1.571747302164006, 0.785388329873661],time_from_start:[1,0]}]}&#39;
</code></pre></div>

<div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a>sudo apt-get install ros-melodic-moveit-visual-tools
</code></pre></div>
-->

<h2 id="code-snapshots">Code snapshots</h2>
<h3 id="snapshot-1">Snapshot 1</h3>
<h4 id="file-robot2dofurdf">File <code>robot2dof.urdf</code></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;2dof_robot&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a>
<a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a><span class="w">    </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;White&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a><span class="w">        </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;1.0 1.0 1.0 1.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a><span class="w">    </span><span class="nt">&lt;/material&gt;</span>
<a id="__codelineno-55-7" name="__codelineno-55-7" href="#__codelineno-55-7"></a>
<a id="__codelineno-55-8" name="__codelineno-55-8" href="#__codelineno-55-8"></a><span class="w">    </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Blue&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-55-9" name="__codelineno-55-9" href="#__codelineno-55-9"></a><span class="w">        </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0.0 0.0 1.0 1.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-10" name="__codelineno-55-10" href="#__codelineno-55-10"></a><span class="w">    </span><span class="nt">&lt;/material&gt;</span><span class="w"> </span>
<a id="__codelineno-55-11" name="__codelineno-55-11" href="#__codelineno-55-11"></a>
<a id="__codelineno-55-12" name="__codelineno-55-12" href="#__codelineno-55-12"></a><span class="w">    </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Red&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-55-13" name="__codelineno-55-13" href="#__codelineno-55-13"></a><span class="w">        </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;1 0 0 1.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-14" name="__codelineno-55-14" href="#__codelineno-55-14"></a><span class="w">    </span><span class="nt">&lt;/material&gt;</span>
<a id="__codelineno-55-15" name="__codelineno-55-15" href="#__codelineno-55-15"></a>
<a id="__codelineno-55-16" name="__codelineno-55-16" href="#__codelineno-55-16"></a><span class="w">    </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Black&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-55-17" name="__codelineno-55-17" href="#__codelineno-55-17"></a><span class="w">        </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 0 1.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-18" name="__codelineno-55-18" href="#__codelineno-55-18"></a><span class="w">    </span><span class="nt">&lt;/material&gt;</span><span class="w">    </span>
<a id="__codelineno-55-19" name="__codelineno-55-19" href="#__codelineno-55-19"></a>
<a id="__codelineno-55-20" name="__codelineno-55-20" href="#__codelineno-55-20"></a><span class="w">   </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;world&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-21" name="__codelineno-55-21" href="#__codelineno-55-21"></a>
<a id="__codelineno-55-22" name="__codelineno-55-22" href="#__codelineno-55-22"></a><span class="w">   </span><span class="cm">&lt;!-- BASE LINK--&gt;</span>
<a id="__codelineno-55-23" name="__codelineno-55-23" href="#__codelineno-55-23"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_link&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-55-24" name="__codelineno-55-24" href="#__codelineno-55-24"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
<a id="__codelineno-55-25" name="__codelineno-55-25" href="#__codelineno-55-25"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-55-26" name="__codelineno-55-26" href="#__codelineno-55-26"></a><span class="w">                </span><span class="nt">&lt;box</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;0.16 0.16 1.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-27" name="__codelineno-55-27" href="#__codelineno-55-27"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-55-28" name="__codelineno-55-28" href="#__codelineno-55-28"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;White&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-29" name="__codelineno-55-29" href="#__codelineno-55-29"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.5&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-30" name="__codelineno-55-30" href="#__codelineno-55-30"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
<a id="__codelineno-55-31" name="__codelineno-55-31" href="#__codelineno-55-31"></a><span class="w">        </span><span class="nt">&lt;collision&gt;</span>
<a id="__codelineno-55-32" name="__codelineno-55-32" href="#__codelineno-55-32"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-55-33" name="__codelineno-55-33" href="#__codelineno-55-33"></a><span class="w">                </span><span class="nt">&lt;box</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;0.16 0.16 1.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-34" name="__codelineno-55-34" href="#__codelineno-55-34"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-55-35" name="__codelineno-55-35" href="#__codelineno-55-35"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.5&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-36" name="__codelineno-55-36" href="#__codelineno-55-36"></a><span class="w">        </span><span class="nt">&lt;/collision&gt;</span>
<a id="__codelineno-55-37" name="__codelineno-55-37" href="#__codelineno-55-37"></a><span class="w">        </span><span class="nt">&lt;inertial&gt;</span>
<a id="__codelineno-55-38" name="__codelineno-55-38" href="#__codelineno-55-38"></a><span class="w">            </span><span class="nt">&lt;mass</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;25&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-39" name="__codelineno-55-39" href="#__codelineno-55-39"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.5&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-40" name="__codelineno-55-40" href="#__codelineno-55-40"></a><span class="w">            </span><span class="nt">&lt;inertia</span><span class="w"> </span><span class="na">ixx=</span><span class="s">&quot;8.741&quot;</span><span class="w"> </span><span class="na">iyy=</span><span class="s">&quot;8.741&quot;</span><span class="w"> </span><span class="na">izz=</span><span class="s">&quot;0.4367&quot;</span><span class="w"> </span><span class="na">ixy=</span><span class="s">&quot;-0.1637&quot;</span><span class="w"> </span><span class="na">ixz=</span><span class="s">&quot;-0.1023&quot;</span><span class="w">  </span><span class="na">iyz=</span><span class="s">&quot;-0.1023&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-41" name="__codelineno-55-41" href="#__codelineno-55-41"></a><span class="w">        </span><span class="nt">&lt;/inertial&gt;</span>
<a id="__codelineno-55-42" name="__codelineno-55-42" href="#__codelineno-55-42"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
<a id="__codelineno-55-43" name="__codelineno-55-43" href="#__codelineno-55-43"></a>
<a id="__codelineno-55-44" name="__codelineno-55-44" href="#__codelineno-55-44"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;fixed_base&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-55-45" name="__codelineno-55-45" href="#__codelineno-55-45"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;world&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-46" name="__codelineno-55-46" href="#__codelineno-55-46"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-47" name="__codelineno-55-47" href="#__codelineno-55-47"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
<a id="__codelineno-55-48" name="__codelineno-55-48" href="#__codelineno-55-48"></a>
<a id="__codelineno-55-49" name="__codelineno-55-49" href="#__codelineno-55-49"></a><span class="w">    </span><span class="cm">&lt;!-- PRVI SEGMENT--&gt;</span>
<a id="__codelineno-55-50" name="__codelineno-55-50" href="#__codelineno-55-50"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;prvi_segment&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-55-51" name="__codelineno-55-51" href="#__codelineno-55-51"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
<a id="__codelineno-55-52" name="__codelineno-55-52" href="#__codelineno-55-52"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-55-53" name="__codelineno-55-53" href="#__codelineno-55-53"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.04&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;0.5&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-54" name="__codelineno-55-54" href="#__codelineno-55-54"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-55-55" name="__codelineno-55-55" href="#__codelineno-55-55"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Red&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-56" name="__codelineno-55-56" href="#__codelineno-55-56"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.12 0.0 0.21&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-57" name="__codelineno-55-57" href="#__codelineno-55-57"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
<a id="__codelineno-55-58" name="__codelineno-55-58" href="#__codelineno-55-58"></a><span class="w">        </span><span class="nt">&lt;collision&gt;</span>
<a id="__codelineno-55-59" name="__codelineno-55-59" href="#__codelineno-55-59"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-55-60" name="__codelineno-55-60" href="#__codelineno-55-60"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.04&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;0.5&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-61" name="__codelineno-55-61" href="#__codelineno-55-61"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-55-62" name="__codelineno-55-62" href="#__codelineno-55-62"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.12 0.0 0.21&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-63" name="__codelineno-55-63" href="#__codelineno-55-63"></a><span class="w">        </span><span class="nt">&lt;/collision&gt;</span>
<a id="__codelineno-55-64" name="__codelineno-55-64" href="#__codelineno-55-64"></a><span class="w">        </span><span class="nt">&lt;inertial&gt;</span>
<a id="__codelineno-55-65" name="__codelineno-55-65" href="#__codelineno-55-65"></a><span class="w">            </span><span class="nt">&lt;mass</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;2.5&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-66" name="__codelineno-55-66" href="#__codelineno-55-66"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.25&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-67" name="__codelineno-55-67" href="#__codelineno-55-67"></a><span class="w">            </span><span class="nt">&lt;inertia</span><span class="w"> </span><span class="na">ixx=</span><span class="s">&quot;0.2091&quot;</span><span class="w"> </span><span class="na">iyy=</span><span class="s">&quot;0.2091&quot;</span><span class="w"> </span><span class="na">izz=</span><span class="s">&quot;0.002&quot;</span><span class="w"> </span><span class="na">ixy=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">ixz=</span><span class="s">&quot;0.0&quot;</span><span class="w">  </span><span class="na">iyz=</span><span class="s">&quot;0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-68" name="__codelineno-55-68" href="#__codelineno-55-68"></a><span class="w">        </span><span class="nt">&lt;/inertial&gt;</span>
<a id="__codelineno-55-69" name="__codelineno-55-69" href="#__codelineno-55-69"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
<a id="__codelineno-55-70" name="__codelineno-55-70" href="#__codelineno-55-70"></a>
<a id="__codelineno-55-71" name="__codelineno-55-71" href="#__codelineno-55-71"></a>
<a id="__codelineno-55-72" name="__codelineno-55-72" href="#__codelineno-55-72"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;prvi_sklep&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-55-73" name="__codelineno-55-73" href="#__codelineno-55-73"></a><span class="w">        </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;1 0 0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-74" name="__codelineno-55-74" href="#__codelineno-55-74"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-75" name="__codelineno-55-75" href="#__codelineno-55-75"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;prvi_segment&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-76" name="__codelineno-55-76" href="#__codelineno-55-76"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0 0.92&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;-1.5707 0 0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-77" name="__codelineno-55-77" href="#__codelineno-55-77"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
<a id="__codelineno-55-78" name="__codelineno-55-78" href="#__codelineno-55-78"></a>
<a id="__codelineno-55-79" name="__codelineno-55-79" href="#__codelineno-55-79"></a><span class="w">     </span><span class="cm">&lt;!-- DRUGI SEGMENT--&gt;</span>
<a id="__codelineno-55-80" name="__codelineno-55-80" href="#__codelineno-55-80"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;drugi_segment&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-55-81" name="__codelineno-55-81" href="#__codelineno-55-81"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
<a id="__codelineno-55-82" name="__codelineno-55-82" href="#__codelineno-55-82"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-55-83" name="__codelineno-55-83" href="#__codelineno-55-83"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.04&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;0.5&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-84" name="__codelineno-55-84" href="#__codelineno-55-84"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-55-85" name="__codelineno-55-85" href="#__codelineno-55-85"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Blue&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-86" name="__codelineno-55-86" href="#__codelineno-55-86"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;-0.08 0.0 0.21&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-87" name="__codelineno-55-87" href="#__codelineno-55-87"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
<a id="__codelineno-55-88" name="__codelineno-55-88" href="#__codelineno-55-88"></a><span class="w">        </span><span class="nt">&lt;collision&gt;</span>
<a id="__codelineno-55-89" name="__codelineno-55-89" href="#__codelineno-55-89"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-55-90" name="__codelineno-55-90" href="#__codelineno-55-90"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.04&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;0.5&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-91" name="__codelineno-55-91" href="#__codelineno-55-91"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-55-92" name="__codelineno-55-92" href="#__codelineno-55-92"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;-0.08 0.0 0.21&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-93" name="__codelineno-55-93" href="#__codelineno-55-93"></a><span class="w">        </span><span class="nt">&lt;/collision&gt;</span>
<a id="__codelineno-55-94" name="__codelineno-55-94" href="#__codelineno-55-94"></a><span class="w">        </span><span class="nt">&lt;inertial&gt;</span>
<a id="__codelineno-55-95" name="__codelineno-55-95" href="#__codelineno-55-95"></a><span class="w">            </span><span class="nt">&lt;mass</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;2.5&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-96" name="__codelineno-55-96" href="#__codelineno-55-96"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.25&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-97" name="__codelineno-55-97" href="#__codelineno-55-97"></a><span class="w">            </span><span class="nt">&lt;inertia</span><span class="w"> </span><span class="na">ixx=</span><span class="s">&quot;0.2091&quot;</span><span class="w"> </span><span class="na">iyy=</span><span class="s">&quot;0.2091&quot;</span><span class="w"> </span><span class="na">izz=</span><span class="s">&quot;0.002&quot;</span><span class="w"> </span><span class="na">ixy=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">ixz=</span><span class="s">&quot;0.0&quot;</span><span class="w">  </span><span class="na">iyz=</span><span class="s">&quot;0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-98" name="__codelineno-55-98" href="#__codelineno-55-98"></a><span class="w">        </span><span class="nt">&lt;/inertial&gt;</span>
<a id="__codelineno-55-99" name="__codelineno-55-99" href="#__codelineno-55-99"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
<a id="__codelineno-55-100" name="__codelineno-55-100" href="#__codelineno-55-100"></a>
<a id="__codelineno-55-101" name="__codelineno-55-101" href="#__codelineno-55-101"></a>
<a id="__codelineno-55-102" name="__codelineno-55-102" href="#__codelineno-55-102"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;drugi_sklep&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-55-103" name="__codelineno-55-103" href="#__codelineno-55-103"></a><span class="w">        </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;1 0 0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-104" name="__codelineno-55-104" href="#__codelineno-55-104"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;prvi_segment&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-105" name="__codelineno-55-105" href="#__codelineno-55-105"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;drugi_segment&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-106" name="__codelineno-55-106" href="#__codelineno-55-106"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.12 0 0.42&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-107" name="__codelineno-55-107" href="#__codelineno-55-107"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
<a id="__codelineno-55-108" name="__codelineno-55-108" href="#__codelineno-55-108"></a>
<a id="__codelineno-55-109" name="__codelineno-55-109" href="#__codelineno-55-109"></a><span class="w">        </span><span class="cm">&lt;!-- TCP SEGMENT--&gt;</span>
<a id="__codelineno-55-110" name="__codelineno-55-110" href="#__codelineno-55-110"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;TCP_segment&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-55-111" name="__codelineno-55-111" href="#__codelineno-55-111"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
<a id="__codelineno-55-112" name="__codelineno-55-112" href="#__codelineno-55-112"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-55-113" name="__codelineno-55-113" href="#__codelineno-55-113"></a><span class="w">                </span><span class="nt">&lt;sphere</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.02&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-114" name="__codelineno-55-114" href="#__codelineno-55-114"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-55-115" name="__codelineno-55-115" href="#__codelineno-55-115"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Red&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-116" name="__codelineno-55-116" href="#__codelineno-55-116"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-117" name="__codelineno-55-117" href="#__codelineno-55-117"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
<a id="__codelineno-55-118" name="__codelineno-55-118" href="#__codelineno-55-118"></a><span class="w">        </span><span class="nt">&lt;collision&gt;</span>
<a id="__codelineno-55-119" name="__codelineno-55-119" href="#__codelineno-55-119"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-55-120" name="__codelineno-55-120" href="#__codelineno-55-120"></a><span class="w">                </span><span class="nt">&lt;sphere</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.02&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-121" name="__codelineno-55-121" href="#__codelineno-55-121"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-55-122" name="__codelineno-55-122" href="#__codelineno-55-122"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-123" name="__codelineno-55-123" href="#__codelineno-55-123"></a><span class="w">        </span><span class="nt">&lt;/collision&gt;</span>
<a id="__codelineno-55-124" name="__codelineno-55-124" href="#__codelineno-55-124"></a><span class="w">        </span><span class="nt">&lt;inertial&gt;</span>
<a id="__codelineno-55-125" name="__codelineno-55-125" href="#__codelineno-55-125"></a><span class="w">            </span><span class="nt">&lt;mass</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.034&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-126" name="__codelineno-55-126" href="#__codelineno-55-126"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.0 0.0 0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-127" name="__codelineno-55-127" href="#__codelineno-55-127"></a><span class="w">            </span><span class="nt">&lt;inertia</span><span class="w"> </span><span class="na">ixx=</span><span class="s">&quot;0.0000054&quot;</span><span class="w"> </span><span class="na">iyy=</span><span class="s">&quot;0.0000054&quot;</span><span class="w"> </span><span class="na">izz=</span><span class="s">&quot;0.0000054&quot;</span><span class="w"> </span><span class="na">ixy=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">ixz=</span><span class="s">&quot;0.0&quot;</span><span class="w">  </span><span class="na">iyz=</span><span class="s">&quot;0.0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-128" name="__codelineno-55-128" href="#__codelineno-55-128"></a><span class="w">        </span><span class="nt">&lt;/inertial&gt;</span>
<a id="__codelineno-55-129" name="__codelineno-55-129" href="#__codelineno-55-129"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
<a id="__codelineno-55-130" name="__codelineno-55-130" href="#__codelineno-55-130"></a>
<a id="__codelineno-55-131" name="__codelineno-55-131" href="#__codelineno-55-131"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;TCP_sklep&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-55-132" name="__codelineno-55-132" href="#__codelineno-55-132"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;drugi_segment&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-133" name="__codelineno-55-133" href="#__codelineno-55-133"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;TCP_segment&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-134" name="__codelineno-55-134" href="#__codelineno-55-134"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;-0.08 0 0.46&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-55-135" name="__codelineno-55-135" href="#__codelineno-55-135"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
<a id="__codelineno-55-136" name="__codelineno-55-136" href="#__codelineno-55-136"></a>
<a id="__codelineno-55-137" name="__codelineno-55-137" href="#__codelineno-55-137"></a><span class="w">    </span><span class="cm">&lt;!-- PRENOSI --&gt;</span>
<a id="__codelineno-55-138" name="__codelineno-55-138" href="#__codelineno-55-138"></a><span class="w">    </span><span class="nt">&lt;transmission</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;trans1&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-55-139" name="__codelineno-55-139" href="#__codelineno-55-139"></a><span class="w">        </span><span class="nt">&lt;type&gt;</span>transmission_interface/SimpleTransmission<span class="nt">&lt;/type&gt;</span>
<a id="__codelineno-55-140" name="__codelineno-55-140" href="#__codelineno-55-140"></a><span class="w">        </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;prvi_sklep&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-55-141" name="__codelineno-55-141" href="#__codelineno-55-141"></a><span class="w">            </span><span class="nt">&lt;hardwareInterface&gt;</span>hardware_interface/PositionJointInterface<span class="nt">&lt;/hardwareInterface&gt;</span>
<a id="__codelineno-55-142" name="__codelineno-55-142" href="#__codelineno-55-142"></a><span class="w">        </span><span class="nt">&lt;/joint&gt;</span>
<a id="__codelineno-55-143" name="__codelineno-55-143" href="#__codelineno-55-143"></a><span class="w">        </span><span class="nt">&lt;actuator</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;motor1&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-55-144" name="__codelineno-55-144" href="#__codelineno-55-144"></a><span class="w">            </span><span class="nt">&lt;mechanicalReduction&gt;</span>1<span class="nt">&lt;/mechanicalReduction&gt;</span>
<a id="__codelineno-55-145" name="__codelineno-55-145" href="#__codelineno-55-145"></a><span class="w">        </span><span class="nt">&lt;/actuator&gt;</span>
<a id="__codelineno-55-146" name="__codelineno-55-146" href="#__codelineno-55-146"></a><span class="w">    </span><span class="nt">&lt;/transmission&gt;</span>
<a id="__codelineno-55-147" name="__codelineno-55-147" href="#__codelineno-55-147"></a>
<a id="__codelineno-55-148" name="__codelineno-55-148" href="#__codelineno-55-148"></a><span class="w">    </span><span class="nt">&lt;transmission</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;trans2&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-55-149" name="__codelineno-55-149" href="#__codelineno-55-149"></a><span class="w">        </span><span class="nt">&lt;type&gt;</span>transmission_interface/SimpleTransmission<span class="nt">&lt;/type&gt;</span>
<a id="__codelineno-55-150" name="__codelineno-55-150" href="#__codelineno-55-150"></a><span class="w">        </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;drugi_sklep&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-55-151" name="__codelineno-55-151" href="#__codelineno-55-151"></a><span class="w">            </span><span class="nt">&lt;hardwareInterface&gt;</span>hardware_interface/PositionJointInterface<span class="nt">&lt;/hardwareInterface&gt;</span>
<a id="__codelineno-55-152" name="__codelineno-55-152" href="#__codelineno-55-152"></a><span class="w">        </span><span class="nt">&lt;/joint&gt;</span>
<a id="__codelineno-55-153" name="__codelineno-55-153" href="#__codelineno-55-153"></a><span class="w">        </span><span class="nt">&lt;actuator</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;motor2&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-55-154" name="__codelineno-55-154" href="#__codelineno-55-154"></a><span class="w">            </span><span class="nt">&lt;mechanicalReduction&gt;</span>1<span class="nt">&lt;/mechanicalReduction&gt;</span>
<a id="__codelineno-55-155" name="__codelineno-55-155" href="#__codelineno-55-155"></a><span class="w">        </span><span class="nt">&lt;/actuator&gt;</span>
<a id="__codelineno-55-156" name="__codelineno-55-156" href="#__codelineno-55-156"></a><span class="w">    </span><span class="nt">&lt;/transmission&gt;</span>
<a id="__codelineno-55-157" name="__codelineno-55-157" href="#__codelineno-55-157"></a>
<a id="__codelineno-55-158" name="__codelineno-55-158" href="#__codelineno-55-158"></a><span class="w">    </span><span class="nt">&lt;gazebo&gt;</span>
<a id="__codelineno-55-159" name="__codelineno-55-159" href="#__codelineno-55-159"></a><span class="w">        </span><span class="nt">&lt;plugin</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;control&quot;</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;libgazebo_ros_control.so&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-55-160" name="__codelineno-55-160" href="#__codelineno-55-160"></a><span class="w">            </span><span class="nt">&lt;robotNamespace&gt;</span>/MOJROBOT<span class="nt">&lt;/robotNamespace&gt;</span>
<a id="__codelineno-55-161" name="__codelineno-55-161" href="#__codelineno-55-161"></a><span class="w">        </span><span class="nt">&lt;/plugin&gt;</span>
<a id="__codelineno-55-162" name="__codelineno-55-162" href="#__codelineno-55-162"></a><span class="w">    </span><span class="nt">&lt;/gazebo&gt;</span><span class="w"> </span>
<a id="__codelineno-55-163" name="__codelineno-55-163" href="#__codelineno-55-163"></a>
<a id="__codelineno-55-164" name="__codelineno-55-164" href="#__codelineno-55-164"></a><span class="w">    </span><span class="nt">&lt;gazebo&gt;</span>
<a id="__codelineno-55-165" name="__codelineno-55-165" href="#__codelineno-55-165"></a><span class="w">        </span><span class="nt">&lt;plugin</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;libgazebo_ros_joint_state_publisher.so&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-55-166" name="__codelineno-55-166" href="#__codelineno-55-166"></a><span class="w">            </span><span class="nt">&lt;jointName&gt;</span>prvi_sklep,<span class="w"> </span>drugi_sklep<span class="nt">&lt;/jointName&gt;</span>
<a id="__codelineno-55-167" name="__codelineno-55-167" href="#__codelineno-55-167"></a><span class="w">        </span><span class="nt">&lt;/plugin&gt;</span>
<a id="__codelineno-55-168" name="__codelineno-55-168" href="#__codelineno-55-168"></a><span class="w">    </span><span class="nt">&lt;/gazebo&gt;</span><span class="w">      </span>
<a id="__codelineno-55-169" name="__codelineno-55-169" href="#__codelineno-55-169"></a>
<a id="__codelineno-55-170" name="__codelineno-55-170" href="#__codelineno-55-170"></a><span class="nt">&lt;/robot&gt;</span>
</code></pre></div>
<h4 id="file-zagon_gazebolaunch">File <code>zagon_gazebo.launch</code></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a>
<a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a><span class="nt">&lt;launch&gt;</span>
<a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a>
<a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;paused&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a>
<a id="__codelineno-56-7" name="__codelineno-56-7" href="#__codelineno-56-7"></a><span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;robot_description&quot;</span><span class="w"> </span><span class="na">textfile=</span><span class="s">&quot;$(find robot_2dof)/urdf/robot2dof.urdf&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-56-8" name="__codelineno-56-8" href="#__codelineno-56-8"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find gazebo_ros)/launch/empty_world.launch&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-56-9" name="__codelineno-56-9" href="#__codelineno-56-9"></a><span class="w">        </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;paused&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg paused)&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-56-10" name="__codelineno-56-10" href="#__codelineno-56-10"></a><span class="w">    </span><span class="nt">&lt;/include&gt;</span><span class="w">    </span>
<a id="__codelineno-56-11" name="__codelineno-56-11" href="#__codelineno-56-11"></a>
<a id="__codelineno-56-12" name="__codelineno-56-12" href="#__codelineno-56-12"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;gazebo_ros&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;spawn_urdf&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;spawn_model&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;-param robot_description -urdf -model robot2dof&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-56-13" name="__codelineno-56-13" href="#__codelineno-56-13"></a>
<a id="__codelineno-56-14" name="__codelineno-56-14" href="#__codelineno-56-14"></a><span class="w">    </span><span class="nt">&lt;rosparam</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find robot_2dof)/config/controller.yaml&quot;</span><span class="w"> </span><span class="na">command=</span><span class="s">&quot;load&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-56-15" name="__codelineno-56-15" href="#__codelineno-56-15"></a>
<a id="__codelineno-56-16" name="__codelineno-56-16" href="#__codelineno-56-16"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;controller_spawner&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;controller_manager&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;spawner&quot;</span><span class="w"> </span><span class="na">respawn=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="w"> </span><span class="na">ns=</span><span class="s">&quot;/MOJROBOT&quot;</span><span class="w"> </span>
<a id="__codelineno-56-17" name="__codelineno-56-17" href="#__codelineno-56-17"></a><span class="w">        </span><span class="na">args=</span><span class="s">&quot;joint_state_controller</span>
<a id="__codelineno-56-18" name="__codelineno-56-18" href="#__codelineno-56-18"></a><span class="s">        joint_controller&quot;</span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!--##NOVO--&gt;</span>
<a id="__codelineno-56-19" name="__codelineno-56-19" href="#__codelineno-56-19"></a>
<a id="__codelineno-56-20" name="__codelineno-56-20" href="#__codelineno-56-20"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">respawn=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-56-21" name="__codelineno-56-21" href="#__codelineno-56-21"></a><span class="w">        </span><span class="nt">&lt;remap</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;/joint_states&quot;</span><span class="w"> </span><span class="na">to=</span><span class="s">&quot;/MOJROBOT/joint_states&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-56-22" name="__codelineno-56-22" href="#__codelineno-56-22"></a><span class="w">    </span><span class="nt">&lt;/node&gt;</span>
<a id="__codelineno-56-23" name="__codelineno-56-23" href="#__codelineno-56-23"></a>
<a id="__codelineno-56-24" name="__codelineno-56-24" href="#__codelineno-56-24"></a><span class="w">    </span><span class="cm">&lt;!-- --&gt;</span>
<a id="__codelineno-56-25" name="__codelineno-56-25" href="#__codelineno-56-25"></a>
<a id="__codelineno-56-26" name="__codelineno-56-26" href="#__codelineno-56-26"></a><span class="nt">&lt;/launch&gt;</span>
</code></pre></div>
<h4 id="file-controlleryaml">File <code>controller.yaml</code></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="nt">MOJROBOT</span><span class="p">:</span>
<a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="w">  </span><span class="c1"># publish all joint states:</span>
<a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a><span class="w">  </span><span class="nt">joint_state_controller</span><span class="p">:</span>
<a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">joint_state_controller/JointStateController</span>
<a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a><span class="w">    </span><span class="nt">publish_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<a id="__codelineno-57-6" name="__codelineno-57-6" href="#__codelineno-57-6"></a><span class="w">  </span><span class="nt">joint_controller</span><span class="p">:</span><span class="w"> </span><span class="c1">##NOVO</span>
<a id="__codelineno-57-7" name="__codelineno-57-7" href="#__codelineno-57-7"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">position_controllers/JointTrajectoryController</span><span class="w"> </span><span class="c1">##NOVO</span>
<a id="__codelineno-57-8" name="__codelineno-57-8" href="#__codelineno-57-8"></a><span class="w">    </span><span class="nt">joints</span><span class="p">:</span><span class="w"> </span><span class="c1">##NOVO</span>
<a id="__codelineno-57-9" name="__codelineno-57-9" href="#__codelineno-57-9"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prvi_sklep</span><span class="w"> </span><span class="c1">##NOVO</span>
<a id="__codelineno-57-10" name="__codelineno-57-10" href="#__codelineno-57-10"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">drugi_sklep</span><span class="w"> </span><span class="c1">##NOVO</span>
<a id="__codelineno-57-11" name="__codelineno-57-11" href="#__codelineno-57-11"></a>
<a id="__codelineno-57-12" name="__codelineno-57-12" href="#__codelineno-57-12"></a><span class="nt">MOJROBOT/gazebo_ros_control/pid_gains</span><span class="p">:</span>
<a id="__codelineno-57-13" name="__codelineno-57-13" href="#__codelineno-57-13"></a><span class="w">  </span><span class="nt">prvi_sklep</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">p</span><span class="p">:</span><span class="w"> </span><span class="nv">1000</span><span class="p p-Indicator">,</span><span class="nt"> i</span><span class="p">:</span><span class="w"> </span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="nt">  d</span><span class="p">:</span><span class="w"> </span><span class="nv">100</span><span class="p p-Indicator">}</span>
<a id="__codelineno-57-14" name="__codelineno-57-14" href="#__codelineno-57-14"></a><span class="w">  </span><span class="nt">drugi_sklep</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">p</span><span class="p">:</span><span class="w"> </span><span class="nv">1000</span><span class="p p-Indicator">,</span><span class="nt"> i</span><span class="p">:</span><span class="w"> </span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="nt">  d</span><span class="p">:</span><span class="w"> </span><span class="nv">100</span><span class="p p-Indicator">}</span>
</code></pre></div>
<h3 id="snapshot-2">Snapshot 2</h3>
<h4 id="file-ros_controllersyaml">File <code>ros_controllers.yaml</code></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="c1"># Simulation settings for using moveit_sim_controllers</span>
<a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a><span class="nt">moveit_sim_hw_interface</span><span class="p">:</span>
<a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="w">  </span><span class="nt">joint_model_group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">arm</span>
<a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a><span class="w">  </span><span class="nt">joint_model_group_pose</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">home</span>
<a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a><span class="c1"># Settings for ros_control_boilerplate control loop</span>
<a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a><span class="nt">generic_hw_control_loop</span><span class="p">:</span>
<a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a><span class="w">  </span><span class="nt">loop_hz</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span>
<a id="__codelineno-58-8" name="__codelineno-58-8" href="#__codelineno-58-8"></a><span class="w">  </span><span class="nt">cycle_time_error_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.01</span>
<a id="__codelineno-58-9" name="__codelineno-58-9" href="#__codelineno-58-9"></a><span class="c1"># Settings for ros_control hardware interface</span>
<a id="__codelineno-58-10" name="__codelineno-58-10" href="#__codelineno-58-10"></a><span class="nt">hardware_interface</span><span class="p">:</span>
<a id="__codelineno-58-11" name="__codelineno-58-11" href="#__codelineno-58-11"></a><span class="w">  </span><span class="nt">joints</span><span class="p">:</span>
<a id="__codelineno-58-12" name="__codelineno-58-12" href="#__codelineno-58-12"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prvi_sklep</span>
<a id="__codelineno-58-13" name="__codelineno-58-13" href="#__codelineno-58-13"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">drugi_sklep</span>
<a id="__codelineno-58-14" name="__codelineno-58-14" href="#__codelineno-58-14"></a><span class="w">  </span><span class="nt">sim_control_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w">  </span><span class="c1"># 0: position, 1: velocity</span>
<a id="__codelineno-58-15" name="__codelineno-58-15" href="#__codelineno-58-15"></a><span class="c1"># Publish all joint states</span>
<a id="__codelineno-58-16" name="__codelineno-58-16" href="#__codelineno-58-16"></a><span class="c1"># Creates the /joint_states topic necessary in ROS</span>
<a id="__codelineno-58-17" name="__codelineno-58-17" href="#__codelineno-58-17"></a><span class="nt">MOJROBOT</span><span class="p">:</span>
<a id="__codelineno-58-18" name="__codelineno-58-18" href="#__codelineno-58-18"></a><span class="w">  </span><span class="nt">joint_state_controller</span><span class="p">:</span>
<a id="__codelineno-58-19" name="__codelineno-58-19" href="#__codelineno-58-19"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">joint_state_controller/JointStateController</span>
<a id="__codelineno-58-20" name="__codelineno-58-20" href="#__codelineno-58-20"></a><span class="w">    </span><span class="nt">publish_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
<a id="__codelineno-58-21" name="__codelineno-58-21" href="#__codelineno-58-21"></a><span class="w">  </span><span class="nt">arm_controller</span><span class="p">:</span>
<a id="__codelineno-58-22" name="__codelineno-58-22" href="#__codelineno-58-22"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">position_controllers/JointTrajectoryController</span>
<a id="__codelineno-58-23" name="__codelineno-58-23" href="#__codelineno-58-23"></a><span class="w">    </span><span class="nt">joints</span><span class="p">:</span>
<a id="__codelineno-58-24" name="__codelineno-58-24" href="#__codelineno-58-24"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prvi_sklep</span>
<a id="__codelineno-58-25" name="__codelineno-58-25" href="#__codelineno-58-25"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">drugi_sklep</span>
<a id="__codelineno-58-26" name="__codelineno-58-26" href="#__codelineno-58-26"></a><span class="w">    </span><span class="nt">gains</span><span class="p">:</span>
<a id="__codelineno-58-27" name="__codelineno-58-27" href="#__codelineno-58-27"></a><span class="w">      </span><span class="nt">prvi_sklep</span><span class="p">:</span>
<a id="__codelineno-58-28" name="__codelineno-58-28" href="#__codelineno-58-28"></a><span class="w">        </span><span class="nt">p</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<a id="__codelineno-58-29" name="__codelineno-58-29" href="#__codelineno-58-29"></a><span class="w">        </span><span class="nt">d</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-58-30" name="__codelineno-58-30" href="#__codelineno-58-30"></a><span class="w">        </span><span class="nt">i</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-58-31" name="__codelineno-58-31" href="#__codelineno-58-31"></a><span class="w">        </span><span class="nt">i_clamp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-58-32" name="__codelineno-58-32" href="#__codelineno-58-32"></a><span class="w">      </span><span class="nt">drugi_sklep</span><span class="p">:</span>
<a id="__codelineno-58-33" name="__codelineno-58-33" href="#__codelineno-58-33"></a><span class="w">        </span><span class="nt">p</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<a id="__codelineno-58-34" name="__codelineno-58-34" href="#__codelineno-58-34"></a><span class="w">        </span><span class="nt">d</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-58-35" name="__codelineno-58-35" href="#__codelineno-58-35"></a><span class="w">        </span><span class="nt">i</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-58-36" name="__codelineno-58-36" href="#__codelineno-58-36"></a><span class="w">        </span><span class="nt">i_clamp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-58-37" name="__codelineno-58-37" href="#__codelineno-58-37"></a>
<a id="__codelineno-58-38" name="__codelineno-58-38" href="#__codelineno-58-38"></a><span class="nt">controller_list</span><span class="p">:</span>
<a id="__codelineno-58-39" name="__codelineno-58-39" href="#__codelineno-58-39"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MOJROBOT/arm_controller</span>
<a id="__codelineno-58-40" name="__codelineno-58-40" href="#__codelineno-58-40"></a><span class="w">    </span><span class="nt">action_ns</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">follow_joint_trajectory</span>
<a id="__codelineno-58-41" name="__codelineno-58-41" href="#__codelineno-58-41"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FollowJointTrajectory</span>
<a id="__codelineno-58-42" name="__codelineno-58-42" href="#__codelineno-58-42"></a><span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-58-43" name="__codelineno-58-43" href="#__codelineno-58-43"></a><span class="w">    </span><span class="nt">joints</span><span class="p">:</span>
<a id="__codelineno-58-44" name="__codelineno-58-44" href="#__codelineno-58-44"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prvi_sklep</span>
<a id="__codelineno-58-45" name="__codelineno-58-45" href="#__codelineno-58-45"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">drugi_sklep</span><span class="w">    </span>
</code></pre></div>
<h4 id="file-ros_controllerslaunch">File <code>ros_controllers.launch</code></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a><span class="nt">&lt;launch&gt;</span>
<a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a>
<a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a><span class="w">  </span><span class="cm">&lt;!-- Load joint controller configurations from YAML file to parameter server --&gt;</span>
<a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a><span class="w">  </span><span class="nt">&lt;rosparam</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find robot_2dof_moveit_config)/config/ros_controllers.yaml&quot;</span><span class="w"> </span><span class="na">command=</span><span class="s">&quot;load&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a>
<a id="__codelineno-59-7" name="__codelineno-59-7" href="#__codelineno-59-7"></a><span class="w">  </span><span class="cm">&lt;!-- Load the controllers --&gt;</span>
<a id="__codelineno-59-8" name="__codelineno-59-8" href="#__codelineno-59-8"></a><span class="w">  </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;controller_spawner&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;controller_manager&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;spawner&quot;</span><span class="w"> </span><span class="na">respawn=</span><span class="s">&quot;false&quot;</span>
<a id="__codelineno-59-9" name="__codelineno-59-9" href="#__codelineno-59-9"></a><span class="w">    </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;--namespace=/MOJROBOT</span>
<a id="__codelineno-59-10" name="__codelineno-59-10" href="#__codelineno-59-10"></a><span class="s">    joint_state_controller</span>
<a id="__codelineno-59-11" name="__codelineno-59-11" href="#__codelineno-59-11"></a><span class="s">    arm_controller</span>
<a id="__codelineno-59-12" name="__codelineno-59-12" href="#__codelineno-59-12"></a><span class="s">    --timeout 20&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-59-13" name="__codelineno-59-13" href="#__codelineno-59-13"></a>
<a id="__codelineno-59-14" name="__codelineno-59-14" href="#__codelineno-59-14"></a><span class="nt">&lt;/launch&gt;</span>
</code></pre></div>
<h4 id="file-demo_gazebolaunch">File <code>demo_gazebo.launch</code></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="nt">&lt;launch&gt;</span>
<a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a>
<a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a><span class="w">  </span><span class="cm">&lt;!-- By default, we do not start a database (it can be large) --&gt;</span>
<a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a><span class="w">  </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;db&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a><span class="w">  </span><span class="cm">&lt;!-- Allow user to specify database location --&gt;</span>
<a id="__codelineno-60-6" name="__codelineno-60-6" href="#__codelineno-60-6"></a><span class="w">  </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;db_path&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;$(find robot_2dof_moveit_config)/default_warehouse_mongo_db&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-60-7" name="__codelineno-60-7" href="#__codelineno-60-7"></a>
<a id="__codelineno-60-8" name="__codelineno-60-8" href="#__codelineno-60-8"></a><span class="w">  </span><span class="cm">&lt;!-- By default, we are not in debug mode --&gt;</span>
<a id="__codelineno-60-9" name="__codelineno-60-9" href="#__codelineno-60-9"></a><span class="w">  </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;debug&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-60-10" name="__codelineno-60-10" href="#__codelineno-60-10"></a>
<a id="__codelineno-60-11" name="__codelineno-60-11" href="#__codelineno-60-11"></a><span class="w">  </span><span class="cm">&lt;!-- By default, we won&#39;t load or override the robot_description --&gt;</span>
<a id="__codelineno-60-12" name="__codelineno-60-12" href="#__codelineno-60-12"></a><span class="w">  </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;load_robot_description&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-60-13" name="__codelineno-60-13" href="#__codelineno-60-13"></a>
<a id="__codelineno-60-14" name="__codelineno-60-14" href="#__codelineno-60-14"></a><span class="w">  </span><span class="cm">&lt;!--</span>
<a id="__codelineno-60-15" name="__codelineno-60-15" href="#__codelineno-60-15"></a><span class="cm">  By default, hide joint_state_publisher&#39;s GUI</span>
<a id="__codelineno-60-16" name="__codelineno-60-16" href="#__codelineno-60-16"></a>
<a id="__codelineno-60-17" name="__codelineno-60-17" href="#__codelineno-60-17"></a><span class="cm">  MoveIt!&#39;s &quot;demo&quot; mode replaces the real robot driver with the joint_state_publisher.</span>
<a id="__codelineno-60-18" name="__codelineno-60-18" href="#__codelineno-60-18"></a><span class="cm">  The latter one maintains and publishes the current joint configuration of the simulated robot.</span>
<a id="__codelineno-60-19" name="__codelineno-60-19" href="#__codelineno-60-19"></a><span class="cm">  It also provides a GUI to move the simulated robot around &quot;manually&quot;.</span>
<a id="__codelineno-60-20" name="__codelineno-60-20" href="#__codelineno-60-20"></a><span class="cm">  This corresponds to moving around the real robot without the use of MoveIt.</span>
<a id="__codelineno-60-21" name="__codelineno-60-21" href="#__codelineno-60-21"></a><span class="cm">  --&gt;</span>
<a id="__codelineno-60-22" name="__codelineno-60-22" href="#__codelineno-60-22"></a><span class="w">  </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;use_gui&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-60-23" name="__codelineno-60-23" href="#__codelineno-60-23"></a>
<a id="__codelineno-60-24" name="__codelineno-60-24" href="#__codelineno-60-24"></a><span class="w">  </span><span class="cm">&lt;!-- Gazebo specific options --&gt;</span>
<a id="__codelineno-60-25" name="__codelineno-60-25" href="#__codelineno-60-25"></a><span class="w">  </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;gazebo_gui&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-60-26" name="__codelineno-60-26" href="#__codelineno-60-26"></a><span class="w">  </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;paused&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-60-27" name="__codelineno-60-27" href="#__codelineno-60-27"></a><span class="w">  </span><span class="cm">&lt;!-- By default, use the urdf location provided from the package --&gt;</span>
<a id="__codelineno-60-28" name="__codelineno-60-28" href="#__codelineno-60-28"></a><span class="w">  </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;urdf_path&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;$(find robot_2dof)/urdf/robot2dof.urdf&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-60-29" name="__codelineno-60-29" href="#__codelineno-60-29"></a>
<a id="__codelineno-60-30" name="__codelineno-60-30" href="#__codelineno-60-30"></a><span class="w">  </span><span class="cm">&lt;!-- launch the gazebo simulator and spawn the robot --&gt;</span>
<a id="__codelineno-60-31" name="__codelineno-60-31" href="#__codelineno-60-31"></a><span class="w">  </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find robot_2dof_moveit_config)/launch/gazebo.launch&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
<a id="__codelineno-60-32" name="__codelineno-60-32" href="#__codelineno-60-32"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;paused&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg paused)&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-60-33" name="__codelineno-60-33" href="#__codelineno-60-33"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;gazebo_gui&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg gazebo_gui)&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-60-34" name="__codelineno-60-34" href="#__codelineno-60-34"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;urdf_path&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg urdf_path)&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-60-35" name="__codelineno-60-35" href="#__codelineno-60-35"></a><span class="w">  </span><span class="nt">&lt;/include&gt;</span>
<a id="__codelineno-60-36" name="__codelineno-60-36" href="#__codelineno-60-36"></a>
<a id="__codelineno-60-37" name="__codelineno-60-37" href="#__codelineno-60-37"></a><span class="w">  </span><span class="cm">&lt;!-- If needed, broadcast static tf for robot root --&gt;</span>
<a id="__codelineno-60-38" name="__codelineno-60-38" href="#__codelineno-60-38"></a>
<a id="__codelineno-60-39" name="__codelineno-60-39" href="#__codelineno-60-39"></a>
<a id="__codelineno-60-40" name="__codelineno-60-40" href="#__codelineno-60-40"></a><span class="w">  </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-60-41" name="__codelineno-60-41" href="#__codelineno-60-41"></a><span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;use_gui&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg use_gui)&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-60-42" name="__codelineno-60-42" href="#__codelineno-60-42"></a><span class="w">    </span><span class="nt">&lt;rosparam</span><span class="w"> </span><span class="na">param=</span><span class="s">&quot;source_list&quot;</span><span class="nt">&gt;</span>[MOJROBOT/joint_states]<span class="nt">&lt;/rosparam&gt;</span>
<a id="__codelineno-60-43" name="__codelineno-60-43" href="#__codelineno-60-43"></a><span class="w">  </span><span class="nt">&lt;/node&gt;</span>
<a id="__codelineno-60-44" name="__codelineno-60-44" href="#__codelineno-60-44"></a>
<a id="__codelineno-60-45" name="__codelineno-60-45" href="#__codelineno-60-45"></a><span class="w">  </span><span class="cm">&lt;!-- We do not have a robot connected, so publish fake joint states </span>
<a id="__codelineno-60-46" name="__codelineno-60-46" href="#__codelineno-60-46"></a><span class="cm">  &lt;node name=&quot;joint_state_publisher&quot; pkg=&quot;joint_state_publisher&quot; type=&quot;joint_state_publisher&quot; unless=&quot;$(arg use_gui)&quot;&gt;</span>
<a id="__codelineno-60-47" name="__codelineno-60-47" href="#__codelineno-60-47"></a><span class="cm">    &lt;rosparam param=&quot;source_list&quot;&gt;[move_group/fake_controller_joint_states]&lt;/rosparam&gt;</span>
<a id="__codelineno-60-48" name="__codelineno-60-48" href="#__codelineno-60-48"></a><span class="cm">    &lt;rosparam param=&quot;source_list&quot;&gt;[MOJROBOT/joint_states]&lt;/rosparam&gt;</span>
<a id="__codelineno-60-49" name="__codelineno-60-49" href="#__codelineno-60-49"></a><span class="cm">  &lt;/node&gt;</span>
<a id="__codelineno-60-50" name="__codelineno-60-50" href="#__codelineno-60-50"></a><span class="cm">  &lt;node name=&quot;joint_state_publisher&quot; pkg=&quot;joint_state_publisher_gui&quot; type=&quot;joint_state_publisher_gui&quot; if=&quot;$(arg use_gui)&quot;&gt;</span>
<a id="__codelineno-60-51" name="__codelineno-60-51" href="#__codelineno-60-51"></a><span class="cm">    &lt;rosparam param=&quot;source_list&quot;&gt;[move_group/fake_controller_joint_states]&lt;/rosparam&gt;</span>
<a id="__codelineno-60-52" name="__codelineno-60-52" href="#__codelineno-60-52"></a><span class="cm">    &lt;rosparam param=&quot;source_list&quot;&gt;[MOJROBOT/joint_states]&lt;/rosparam&gt;</span>
<a id="__codelineno-60-53" name="__codelineno-60-53" href="#__codelineno-60-53"></a><span class="cm">  &lt;/node&gt;--&gt;</span>
<a id="__codelineno-60-54" name="__codelineno-60-54" href="#__codelineno-60-54"></a>
<a id="__codelineno-60-55" name="__codelineno-60-55" href="#__codelineno-60-55"></a><span class="w">  </span><span class="cm">&lt;!-- Given the published joint states, publish tf for the robot links --&gt;</span>
<a id="__codelineno-60-56" name="__codelineno-60-56" href="#__codelineno-60-56"></a><span class="w">  </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">respawn=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-60-57" name="__codelineno-60-57" href="#__codelineno-60-57"></a>
<a id="__codelineno-60-58" name="__codelineno-60-58" href="#__codelineno-60-58"></a><span class="w">  </span><span class="cm">&lt;!-- Run the main MoveIt! executable without trajectory execution (we do not have controllers configured by default) --&gt;</span>
<a id="__codelineno-60-59" name="__codelineno-60-59" href="#__codelineno-60-59"></a><span class="w">  </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find robot_2dof_moveit_config)/launch/move_group.launch&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-60-60" name="__codelineno-60-60" href="#__codelineno-60-60"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;allow_trajectory_execution&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-60-61" name="__codelineno-60-61" href="#__codelineno-60-61"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;fake_execution&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-60-62" name="__codelineno-60-62" href="#__codelineno-60-62"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;info&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-60-63" name="__codelineno-60-63" href="#__codelineno-60-63"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;debug&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg debug)&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-60-64" name="__codelineno-60-64" href="#__codelineno-60-64"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;load_robot_description&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg load_robot_description)&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-60-65" name="__codelineno-60-65" href="#__codelineno-60-65"></a><span class="w">  </span><span class="nt">&lt;/include&gt;</span>
<a id="__codelineno-60-66" name="__codelineno-60-66" href="#__codelineno-60-66"></a>
<a id="__codelineno-60-67" name="__codelineno-60-67" href="#__codelineno-60-67"></a><span class="w">  </span><span class="cm">&lt;!-- Run Rviz and load the default config to see the state of the move_group node --&gt;</span>
<a id="__codelineno-60-68" name="__codelineno-60-68" href="#__codelineno-60-68"></a><span class="w">  </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find robot_2dof_moveit_config)/launch/moveit_rviz.launch&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-60-69" name="__codelineno-60-69" href="#__codelineno-60-69"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rviz_config&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(find robot_2dof_moveit_config)/launch/moveit.rviz&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-60-70" name="__codelineno-60-70" href="#__codelineno-60-70"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;debug&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg debug)&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-60-71" name="__codelineno-60-71" href="#__codelineno-60-71"></a><span class="w">  </span><span class="nt">&lt;/include&gt;</span>
<a id="__codelineno-60-72" name="__codelineno-60-72" href="#__codelineno-60-72"></a>
<a id="__codelineno-60-73" name="__codelineno-60-73" href="#__codelineno-60-73"></a><span class="w">  </span><span class="cm">&lt;!-- If database loading was enabled, start mongodb as well --&gt;</span>
<a id="__codelineno-60-74" name="__codelineno-60-74" href="#__codelineno-60-74"></a><span class="w">  </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find robot_2dof_moveit_config)/launch/default_warehouse_db.launch&quot;</span><span class="w"> </span><span class="na">if=</span><span class="s">&quot;$(arg db)&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-60-75" name="__codelineno-60-75" href="#__codelineno-60-75"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;moveit_warehouse_database_path&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg db_path)&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-60-76" name="__codelineno-60-76" href="#__codelineno-60-76"></a><span class="w">  </span><span class="nt">&lt;/include&gt;</span>
<a id="__codelineno-60-77" name="__codelineno-60-77" href="#__codelineno-60-77"></a>
<a id="__codelineno-60-78" name="__codelineno-60-78" href="#__codelineno-60-78"></a><span class="nt">&lt;/launch&gt;</span>
</code></pre></div>
<p><a href="https://github.com/wh200720041/warehouse_simulation_toolkit">https://github.com/wh200720041/warehouse_simulation_toolkit</a></p>
<p><a href="robot_2dof_moveit_config.zip">robot_2dof_moveit_config.zip</a></p>
<h2 id="common-pitfalls-and-tips-for-creating-urdf-files">Common Pitfalls and Tips for Creating URDF Files</h2>
<p>Creating URDF (Unified Robot Description Format) files can be challenging, especially for beginners. Small errors in URDF files can lead to significant issues in robot simulation, control, and motion planning. In this section, we will discuss some common pitfalls encountered while creating URDF files and provide tips to avoid these errors. Understanding these pitfalls and best practices will help ensure your robot models are accurate, functional, and easy to debug.</p>
<h3 id="incorrect-syntax-and-formatting-errors">Incorrect Syntax and Formatting Errors</h3>
<p><strong>Pitfall</strong>: One of the most common issues with URDF files is incorrect syntax or formatting, such as missing tags, incorrect nesting of elements, or improperly closed tags. URDF is based on XML, which is strict about structure and format. Any deviation from the proper syntax will cause the parser to fail, resulting in errors when loading the robot model.</p>
<p><strong>Tips</strong>:</p>
<ul>
<li><em>Use a Code Editor with XML Syntax Highlighting</em>: An editor that highlights XML syntax can help spot missing or mismatched tags. Some editors also offer real-time validation and suggest corrections.</li>
<li><em>Validate URDF Files</em>: Use ROS tools like check_urdf to validate the syntax of your URDF file. This tool checks for XML errors and validates that all required tags are present.</li>
<li><em>Keep XML Clean and Readable</em>: Properly indent your URDF file to make it more readable and easier to spot syntax errors. This will also help in understanding the hierarchy of elements, such as links and joints.</li>
</ul>
<p>Example Command for Validation:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a>rosrun<span class="w"> </span>urdf_parser_py<span class="w"> </span>check_urdf<span class="w"> </span>my_robot.urdf
</code></pre></div>
<h3 id="incorrect-inertia-and-mass-properties">Incorrect Inertia and Mass Properties</h3>
<p><strong>Pitfall</strong>: Incorrectly defining inertia and mass properties can cause unrealistic physical behaviors in the simulation. For example, setting the mass too high or too low can lead to unstable simulations, and incorrect inertia values can cause unexpected rotations or movements.</p>
<p><strong>Tips</strong>:
- <em>Calculate Accurate Inertia Values</em>: Use tools or scripts to calculate accurate inertia tensors for different shapes. For simple geometries like boxes, cylinders, and spheres, the inertia can be calculated using standard formulas. For complex shapes, consider using CAD software or specialized tools to compute the inertia tensor.
- <em>Set Realistic Mass Values</em>: Ensure that the mass values for each link are realistic relative to the robot’s size and material. Unrealistic mass values can make the simulation behave incorrectly, such as making a robot too heavy to move or too light to stand still.
- <em>Test Physical Properties Incrementally</em>: Start with simple simulations to test physical properties. Gradually add complexity and adjust mass and inertia values to observe how they affect the simulation.</p>
<h3 id="incorrect-joint-definitions-and-limits">Incorrect Joint Definitions and Limits</h3>
<p><strong>Pitfall</strong>: Defining joints incorrectly, such as misconfiguring their type, axis of rotation, or limits, can lead to unexpected robot behavior. This could cause joints to move in unintended ways, become locked, or result in instability during simulation.</p>
<p><strong>Tips</strong>:</p>
<ul>
<li><em>Correctly Define Joint Types</em>: Ensure the joint type (e.g., revolute, prismatic, fixed) matches the intended movement for each connection between links. A common mistake is to set a joint type incorrectly, causing the robot to behave in an unintended manner.</li>
<li><em>Set Appropriate Joint Limits</em>: Define realistic lower and upper limits for each joint to avoid unnatural movements. For example, a human-like arm joint should have a limited range to reflect real-world constraints.</li>
<li><em>Align Joint Axis Properly</em>: Ensure the joint’s axis of rotation or translation is correctly aligned. Misaligned axes can cause the robot parts to move in unexpected directions.</li>
</ul>
<p>Example URDF Snippet for a Correct Joint Definition:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;elbow_joint&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;revolute&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a><span class="w">  </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;upper_arm&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a><span class="w">  </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;lower_arm&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a><span class="w">  </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 1&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-62-5" name="__codelineno-62-5" href="#__codelineno-62-5"></a><span class="w">  </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-62-6" name="__codelineno-62-6" href="#__codelineno-62-6"></a><span class="w">  </span><span class="nt">&lt;limit</span><span class="w"> </span><span class="na">lower=</span><span class="s">&quot;-1.57&quot;</span><span class="w"> </span><span class="na">upper=</span><span class="s">&quot;1.57&quot;</span><span class="w"> </span><span class="na">effort=</span><span class="s">&quot;50&quot;</span><span class="w"> </span><span class="na">velocity=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-62-7" name="__codelineno-62-7" href="#__codelineno-62-7"></a><span class="nt">&lt;/joint&gt;</span>
</code></pre></div>
<h3 id="misaligned-visual-and-collision-elements">Misaligned Visual and Collision Elements</h3>
<p><strong>Pitfall</strong>: Misalignment between visual and collision elements can cause issues where the robot appears correctly but does not interact with the environment as expected. For example, the robot might visually clear an obstacle, but its collision model might still make contact, causing unexpected behavior.</p>
<p><strong>Tips</strong>:</p>
<ul>
<li><em>Ensure Alignment of Visual and Collision Geometries</em>: When defining the visual and collision elements, make sure they are aligned and positioned correctly relative to each other. Use the same origin and orientation where possible to avoid discrepancies.</li>
<li><em>Simplify Collision Models</em>: Use simpler geometries for collision models to reduce computational load and improve simulation performance. It is common practice to use basic shapes (boxes, cylinders, spheres) for collision while keeping complex shapes for visual representation.</li>
<li><em>Visualize Collision Models in Simulation</em>: Enable collision model visualization in Gazebo to verify that they match the visual models and are positioned correctly. This can help identify and correct misalignments.</li>
</ul>
<p>Example URDF Snippet for Aligned Visual and Collision Elements:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="nt">&lt;visual&gt;</span>
<a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a><span class="w">  </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a><span class="w">  </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-63-4" name="__codelineno-63-4" href="#__codelineno-63-4"></a><span class="w">    </span><span class="nt">&lt;mesh</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;package://my_robot/meshes/visual/arm.stl&quot;</span><span class="w"> </span><span class="na">scale=</span><span class="s">&quot;1 1 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-63-5" name="__codelineno-63-5" href="#__codelineno-63-5"></a><span class="w">  </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-63-6" name="__codelineno-63-6" href="#__codelineno-63-6"></a><span class="nt">&lt;/visual&gt;</span>
<a id="__codelineno-63-7" name="__codelineno-63-7" href="#__codelineno-63-7"></a><span class="nt">&lt;collision&gt;</span>
<a id="__codelineno-63-8" name="__codelineno-63-8" href="#__codelineno-63-8"></a><span class="w">  </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-63-9" name="__codelineno-63-9" href="#__codelineno-63-9"></a><span class="w">  </span><span class="nt">&lt;geometry&gt;</span>
<a id="__codelineno-63-10" name="__codelineno-63-10" href="#__codelineno-63-10"></a><span class="w">    </span><span class="nt">&lt;box</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;0.1 0.1 1.0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-63-11" name="__codelineno-63-11" href="#__codelineno-63-11"></a><span class="w">  </span><span class="nt">&lt;/geometry&gt;</span>
<a id="__codelineno-63-12" name="__codelineno-63-12" href="#__codelineno-63-12"></a><span class="nt">&lt;/collision&gt;</span>
</code></pre></div>
<h3 id="overly-complex-urdf-files">Overly Complex URDF Files</h3>
<p><strong>Pitfall</strong>: Creating an overly complex URDF file with too many details, high-resolution meshes, or unnecessary elements can make the robot model difficult to manage, slow to load, and hard to debug.</p>
<p><strong>Tips</strong>:</p>
<ul>
<li><em>Use Simplified Models for Prototyping</em>: Start with simplified robot models to test the basic functionality before adding complexity. This makes debugging easier and speeds up the simulation.</li>
<li><em>Optimize Meshes for Performance</em>: When using mesh files, ensure they are optimized for performance. High-resolution meshes can drastically slow down the simulation. Use lower-resolution meshes for collision elements and consider using simpler geometries where possible.</li>
<li><em>Modularize URDF Files</em>: Break down the URDF into smaller, manageable files using the <xacro> format, which allows for parameterization and reuse of components. This approach makes the URDF easier to read, edit, and maintain.</li>
</ul>
<h3 id="not-accounting-for-ros-and-gazebo-integration-differences">Not Accounting for ROS and Gazebo Integration Differences</h3>
<p><strong>Pitfall</strong>: Failing to account for differences between how ROS and Gazebo interpret URDF files can lead to discrepancies between simulation and real-world behavior. For example, certain tags like <transmission> are not used by Gazebo directly but are essential for ROS Control.</p>
<p><strong>Tips</strong>:</p>
<ul>
<li><em>Separate Simulation-Specific Tags</em>: Use Gazebo-specific tags within <gazebo> elements to define properties like friction, damping, or custom sensors that are only relevant to the simulation.</li>
<li><em>Ensure Consistency Between Simulation and Real-World Models</em>: When defining transmissions and controllers, ensure that the URDF’s hardware interface definitions align with both Gazebo and ROS Control requirements.</li>
<li><em>Test in Both Environments</em>: Regularly test the URDF in both Gazebo and ROS environments to ensure consistent behavior and to identify any discrepancies early on.</li>
</ul>
<p>Example URDF Snippet for Gazebo-Specific Tags:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="nt">&lt;gazebo&gt;</span>
<a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a><span class="w">  </span><span class="nt">&lt;sensor</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;camera&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a><span class="w">    </span><span class="nt">&lt;update_rate&gt;</span>30<span class="nt">&lt;/update_rate&gt;</span>
<a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a><span class="w">    </span><span class="nt">&lt;camera&gt;</span>
<a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a><span class="w">      </span><span class="nt">&lt;horizontal_fov&gt;</span>1.047<span class="nt">&lt;/horizontal_fov&gt;</span>
<a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a><span class="w">      </span><span class="nt">&lt;image&gt;</span>
<a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a><span class="w">        </span><span class="nt">&lt;width&gt;</span>640<span class="nt">&lt;/width&gt;</span>
<a id="__codelineno-64-8" name="__codelineno-64-8" href="#__codelineno-64-8"></a><span class="w">        </span><span class="nt">&lt;height&gt;</span>480<span class="nt">&lt;/height&gt;</span>
<a id="__codelineno-64-9" name="__codelineno-64-9" href="#__codelineno-64-9"></a><span class="w">        </span><span class="nt">&lt;format&gt;</span>R8G8B8<span class="nt">&lt;/format&gt;</span>
<a id="__codelineno-64-10" name="__codelineno-64-10" href="#__codelineno-64-10"></a><span class="w">      </span><span class="nt">&lt;/image&gt;</span>
<a id="__codelineno-64-11" name="__codelineno-64-11" href="#__codelineno-64-11"></a><span class="w">      </span><span class="nt">&lt;clip&gt;</span>
<a id="__codelineno-64-12" name="__codelineno-64-12" href="#__codelineno-64-12"></a><span class="w">        </span><span class="nt">&lt;near&gt;</span>0.1<span class="nt">&lt;/near&gt;</span>
<a id="__codelineno-64-13" name="__codelineno-64-13" href="#__codelineno-64-13"></a><span class="w">        </span><span class="nt">&lt;far&gt;</span>100<span class="nt">&lt;/far&gt;</span>
<a id="__codelineno-64-14" name="__codelineno-64-14" href="#__codelineno-64-14"></a><span class="w">      </span><span class="nt">&lt;/clip&gt;</span>
<a id="__codelineno-64-15" name="__codelineno-64-15" href="#__codelineno-64-15"></a><span class="w">    </span><span class="nt">&lt;/camera&gt;</span>
<a id="__codelineno-64-16" name="__codelineno-64-16" href="#__codelineno-64-16"></a><span class="w">  </span><span class="nt">&lt;/sensor&gt;</span>
<a id="__codelineno-64-17" name="__codelineno-64-17" href="#__codelineno-64-17"></a><span class="nt">&lt;/gazebo&gt;</span>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["toc.integrate"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
        <script src="../assets/javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>